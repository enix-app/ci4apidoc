


 



<table>
<tr>
<td style="width:100%"><em>framework/system/Database/ModelFactory.php</em></td>
<td><a href="../../../../../../api/index.md">index</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MigrationRunner.md">prev</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MySQLi/Builder.md">next</a></td>
</tr>
</table>







# CodeIgniter\Database 
<table style="text-align:left">
<tr><th>namespace</th><td>CodeIgniter\Database</td></tr>
</table>

 

<details>
<summary style="margin-bottom:12px;"><strong>Members</strong></summary>
<table>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/BaseBuilder.md">CodeIgniter\Database\BaseBuilder</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/BaseConnection.md">CodeIgniter\Database\BaseConnection</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/BasePreparedQuery.md">CodeIgniter\Database\BasePreparedQuery</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/BaseResult.md">CodeIgniter\Database\BaseResult</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/BaseUtils.md">CodeIgniter\Database\BaseUtils</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Config.md">CodeIgniter\Database\Config</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/ConnectionInterface.md">CodeIgniter\Database\ConnectionInterface</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Database.md">CodeIgniter\Database\Database</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Exceptions/DataException.md">CodeIgniter\Database\Exceptions\DataException</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Exceptions/DatabaseException.md">CodeIgniter\Database\Exceptions\DatabaseException</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Exceptions/ExceptionInterface.md">CodeIgniter\Database\Exceptions\ExceptionInterface</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Forge.md">CodeIgniter\Database\Forge</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Migration.md">CodeIgniter\Database\Migration</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MigrationRunner.md">CodeIgniter\Database\MigrationRunner</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/ModelFactory.md">CodeIgniter\Database\ModelFactory</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MySQLi/Builder.md">CodeIgniter\Database\MySQLi\Builder</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MySQLi/Connection.md">CodeIgniter\Database\MySQLi\Connection</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MySQLi/Forge.md">CodeIgniter\Database\MySQLi\Forge</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MySQLi/PreparedQuery.md">CodeIgniter\Database\MySQLi\PreparedQuery</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MySQLi/Result.md">CodeIgniter\Database\MySQLi\Result</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MySQLi/Utils.md">CodeIgniter\Database\MySQLi\Utils</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Postgre/Builder.md">CodeIgniter\Database\Postgre\Builder</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Postgre/Connection.md">CodeIgniter\Database\Postgre\Connection</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Postgre/Forge.md">CodeIgniter\Database\Postgre\Forge</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Postgre/PreparedQuery.md">CodeIgniter\Database\Postgre\PreparedQuery</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Postgre/Result.md">CodeIgniter\Database\Postgre\Result</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Postgre/Utils.md">CodeIgniter\Database\Postgre\Utils</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/PreparedQueryInterface.md">CodeIgniter\Database\PreparedQueryInterface</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Query.md">CodeIgniter\Database\Query</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/QueryInterface.md">CodeIgniter\Database\QueryInterface</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/ResultInterface.md">CodeIgniter\Database\ResultInterface</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/SQLite3/Builder.md">CodeIgniter\Database\SQLite3\Builder</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/SQLite3/Connection.md">CodeIgniter\Database\SQLite3\Connection</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/SQLite3/Forge.md">CodeIgniter\Database\SQLite3\Forge</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/SQLite3/PreparedQuery.md">CodeIgniter\Database\SQLite3\PreparedQuery</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/SQLite3/Result.md">CodeIgniter\Database\SQLite3\Result</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/SQLite3/Table.md">CodeIgniter\Database\SQLite3\Table</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/SQLite3/Utils.md">CodeIgniter\Database\SQLite3\Utils</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/Seeder.md">CodeIgniter\Database\Seeder</a></td></tr>
</table>
</details>



 
 ## Uses

<table style="text-align:left;">
<tr>
<td>
<strong>Config\Services</strong>
</td>
<td>Services</td>
</tr>
</table>



 
## CodeIgniter\Database\ModelFactory

<table style="text-align:left">
<tr><th>Class</th><td>ModelFactory</td></tr>
<tr><th>Fully Qualified Name</th><td>CodeIgniter\Database\ModelFactory</td></tr>
</table>




### Summary


<table style="text-align:left;">
<tr>
<th>Name</th>
<th>Element</th>
<th>Modifier</th>
<th>Description</th>
</tr>

<tr>
<th><a href="#instances"><strong>instances</strong></a></th>
<td>prop</td>
<td>
private<br>static

</td>
<td>Cache for instance of any models that
have been requested as &quot;shared&quot; instance.</td>
</tr>

<tr>
<th><a href="#get"><strong>get</strong>()</a></th>
<td>method</td>
<td>
public<br>static

</td>
<td>Create new configuration instances or return
a shared instance</td>
</tr>
<tr>
<th><a href="#injectMock"><strong>injectMock</strong>()</a></th>
<td>method</td>
<td>
public<br>static

</td>
<td>Helper method for injecting mock instances while testing.</td>
</tr>
<tr>
<th><a href="#reset"><strong>reset</strong>()</a></th>
<td>method</td>
<td>
public<br>static

</td>
<td>Resets the instances array</td>
</tr>
<tr>
<th><a href="#createClass"><strong>createClass</strong>()</a></th>
<td>method</td>
<td>
private<br>static

</td>
<td>Find configuration class and create instance</td>
</tr>

</table>





### Properties


<hr>

#### $instances

```php
static private $instances = [];
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Cache for instance of any models that
have been requested as "shared" instance.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>array
</td>
</tr>
</table>







### Methods


<hr>

#### get()

```php
public static function get(string $name, bool $getShared = true, ConnectionInterface $connection = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Create new configuration instances or return
a shared instance
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$name</code></td>
<td><em>string
</em></td>
<td>false</td>
<td>Configuration name</td>
</tr>

<tr>
<td>2.</td>
<td><code>$getShared</code></td>
<td><em>bool
</em></td>
<td>false</td>
<td>Use shared instance</td>
</tr>

<tr>
<td>3.</td>
<td><code>$connection</code></td>
<td><em>\ConnectionInterface
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>mixed<br>null
</td>
</tr>
</table>





<details>
<summary><small>Source: 19 lines (25 - 43)</small></summary>

```php
public static function get(string $name, bool $getShared = true, ConnectionInterface $connection = null)
{
	$class = $name;
	if (($pos = strrpos($name, '\\')) !== false)
	{
		$class = substr($name, $pos + 1);
	}

	if (! $getShared)
	{
		return self::createClass($name, $connection);
	}

	if (! isset( self::$instances[$class] ))
	{
		self::$instances[$class] = self::createClass($name, $connection);
	}
	return self::$instances[$class];
}
```

</details>


<hr>

#### injectMock()

```php
public static function injectMock(string $class, $instance)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Helper method for injecting mock instances while testing.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$class</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$instance</code></td>
<td><em>
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>








<details>
<summary><small>Source: 4 lines (51 - 54)</small></summary>

```php
public static function injectMock(string $class, $instance)
{
	self::$instances[$class] = $instance;
}
```

</details>


<hr>

#### reset()

```php
public static function reset()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Resets the instances array
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>










<details>
<summary><small>Source: 4 lines (59 - 62)</small></summary>

```php
public static function reset()
{
	static::$instances = [];
}
```

</details>


<hr>

#### createClass()

```php
private static function createClass(string $name, ConnectionInterface &$connection = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Find configuration class and create instance
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$name</code></td>
<td><em>string
</em></td>
<td>false</td>
<td>Classname</td>
</tr>

<tr>
<td>2.</td>
<td><code>$connection</code></td>
<td><em>\ConnectionInterface<br>null
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>mixed<br>null
</td>
</tr>
</table>





<details>
<summary><small>Source: 39 lines (72 - 110)</small></summary>

```php
private static function createClass(string $name, ConnectionInterface &$connection = null)
{
	if (class_exists($name))
	{
		return new $name();
	}

	$locator = Services::locator();
	$file    = $locator->locateFile($name, 'Models');

	if (empty($file))
	{
		// No file found - check if the class was namespaced
		if (strpos($name, '\\') !== false)
		{
			// Class was namespaced and locateFile couldn't find it
			return null;
		}

		// Check all namespaces
		$files = $locator->search('Models/' . $name);
		if (empty($files))
		{
			return null;
		}

		// Get the first match (prioritizes user and framework)
		$file = reset($files);
	}

	$name = $locator->getClassname($file);

	if (empty($name))
	{
		return null;
	}

	return new $name($connection);
}
```

</details>





 


 
  




<hr>

<table>
<tr>
<td style="width:100%"><em>framework/system/Database/ModelFactory.php</em></td>
<td><a href="../../../../../../api/index.md">index</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MigrationRunner.md">prev</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MySQLi/Builder.md">next</a></td>
<td><a href="#">top</a></td></tr>
</table>




<div style="text-align:right;">

<small>_Generated at **2020-08-14 07:35:10**_ *([EnixApp](https://github.com/enix-app) - [ApiDoc](https://github.com/enix-app/apidoc))*</small>
</div>