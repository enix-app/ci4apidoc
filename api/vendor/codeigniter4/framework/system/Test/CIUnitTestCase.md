


 



<table>
<tr>
<td style="width:100%"><em>framework/system/Test/CIUnitTestCase.php</em></td>
<td><a href="../../../../../../api/index.md">index</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/CIDatabaseTestCase.md">prev</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/ControllerResponse.md">next</a></td>
</tr>
</table>







# CodeIgniter\Test 
<table style="text-align:left">
<tr><th>namespace</th><td>CodeIgniter\Test</td></tr>
</table>

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
CodeIgniter
</td></tr>
</table>

<table>
<tr><td>
An open source application development framework for PHP

This content is released under the MIT License (MIT)

Copyright (c) 2014-2019 British Columbia Institute of Technology
Copyright (c) 2019-2020 CodeIgniter Foundation

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
</td></tr>
</table>

</details>



<table style="text-align:left">
<tr style="vertical-align:top;">
<th>package</th>
<td>CodeIgniter
</td>
</tr>
<tr style="vertical-align:top;">
<th>author</th>
<td>CodeIgniter Dev Team
</td>
</tr>
<tr style="vertical-align:top;">
<th>copyright</th>
<td>2019-2020 CodeIgniter Foundation
</td>
</tr>
<tr style="vertical-align:top;">
<th>license</th>
<td><a href="https://opensource.org/licenses/MIT">https://opensource.org/licenses/MIT</a>	MIT License
</td>
</tr>
<tr style="vertical-align:top;">
<th>link</th>
<td><a href="https://codeigniter.com">https://codeigniter.com</a>

</td>
</tr>
<tr style="vertical-align:top;">
<th>filesource</th>
<td>framework/system/Test/CIUnitTestCase.php
</td>
</tr>
</table>

 

<details>
<summary style="margin-bottom:12px;"><strong>Members</strong></summary>
<table>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/CIDatabaseTestCase.md">CodeIgniter\Test\CIDatabaseTestCase</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/CIUnitTestCase.md">CodeIgniter\Test\CIUnitTestCase</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/ControllerResponse.md">CodeIgniter\Test\ControllerResponse</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/ControllerTester.md">CodeIgniter\Test\ControllerTester</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/DOMParser.md">CodeIgniter\Test\DOMParser</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Fabricator.md">CodeIgniter\Test\Fabricator</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/FeatureResponse.md">CodeIgniter\Test\FeatureResponse</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/FeatureTestCase.md">CodeIgniter\Test\FeatureTestCase</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/FeatureTestTrait.md">CodeIgniter\Test\FeatureTestTrait</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Filters/CITestStreamFilter.md">CodeIgniter\Test\Filters\CITestStreamFilter</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Interfaces/FabricatorModel.md">CodeIgniter\Test\Interfaces\FabricatorModel</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockAppConfig.md">CodeIgniter\Test\Mock\MockAppConfig</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockAutoload.md">CodeIgniter\Test\Mock\MockAutoload</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockBuilder.md">CodeIgniter\Test\Mock\MockBuilder</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCLIConfig.md">CodeIgniter\Test\Mock\MockCLIConfig</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCURLRequest.md">CodeIgniter\Test\Mock\MockCURLRequest</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCache.md">CodeIgniter\Test\Mock\MockCache</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCodeIgniter.md">CodeIgniter\Test\Mock\MockCodeIgniter</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockConnection.md">CodeIgniter\Test\Mock\MockConnection</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockEmail.md">CodeIgniter\Test\Mock\MockEmail</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockEvents.md">CodeIgniter\Test\Mock\MockEvents</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockFileLogger.md">CodeIgniter\Test\Mock\MockFileLogger</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockIncomingRequest.md">CodeIgniter\Test\Mock\MockIncomingRequest</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockLanguage.md">CodeIgniter\Test\Mock\MockLanguage</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockLogger.md">CodeIgniter\Test\Mock\MockLogger</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockQuery.md">CodeIgniter\Test\Mock\MockQuery</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResourceController.md">CodeIgniter\Test\Mock\MockResourceController</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResourcePresenter.md">CodeIgniter\Test\Mock\MockResourcePresenter</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResponse.md">CodeIgniter\Test\Mock\MockResponse</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResult.md">CodeIgniter\Test\Mock\MockResult</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockSecurity.md">CodeIgniter\Test\Mock\MockSecurity</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockServices.md">CodeIgniter\Test\Mock\MockServices</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockSession.md">CodeIgniter\Test\Mock\MockSession</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockTable.md">CodeIgniter\Test\Mock\MockTable</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/ReflectionHelper.md">CodeIgniter\Test\ReflectionHelper</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/TestLogger.md">CodeIgniter\Test\TestLogger</a></td></tr>
</table>
</details>



 
 ## Uses

<table style="text-align:left;">
<tr>
<td>
<a href="../../../../../../api/vendor/codeigniter4/framework/system/Events/Events.md"><strong>CodeIgniter\Events\Events</strong></a>
</td>
<td>Events</td>
</tr>
<tr>
<td>
<a href="../../../../../../api/vendor/codeigniter4/framework/system/Session/Handlers/ArrayHandler.md"><strong>CodeIgniter\Session\Handlers\ArrayHandler</strong></a>
</td>
<td>ArrayHandler</td>
</tr>
<tr>
<td>
<a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockEmail.md"><strong>CodeIgniter\Test\Mock\MockEmail</strong></a>
</td>
<td>MockEmail</td>
</tr>
<tr>
<td>
<a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockSession.md"><strong>CodeIgniter\Test\Mock\MockSession</strong></a>
</td>
<td>MockSession</td>
</tr>
<tr>
<td>
<strong>Config\Services</strong>
</td>
<td>Services</td>
</tr>
<tr>
<td>
<strong>PHPUnit\Framework\TestCase</strong>
</td>
<td>TestCase</td>
</tr>
</table>



 
## CodeIgniter\Test\CIUnitTestCase

<table style="text-align:left">
<tr><th>Class</th><td>CIUnitTestCase</td></tr>
<tr><th>Fully Qualified Name</th><td>CodeIgniter\Test\CIUnitTestCase</td></tr>
<tr><th>Extends</th><td><a href="">PHPUnit\Framework\TestCase</a></td></tr>
</table>


<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
PHPunit test case.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>



### Summary


<table style="text-align:left;">
<tr>
<th>Name</th>
<th>Element</th>
<th>Modifier</th>
<th>Description</th>
</tr>

<tr>
<th><a href="#app"><strong>app</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td></td>
</tr>
<tr>
<th><a href="#setUpMethods"><strong>setUpMethods</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Methods to run during setUp.</td>
</tr>
<tr>
<th><a href="#tearDownMethods"><strong>tearDownMethods</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Methods to run during tearDown.</td>
</tr>

<tr>
<th><a href="#setUpBeforeClass"><strong>setUpBeforeClass</strong>()</a></th>
<td>method</td>
<td>
public<br>static

</td>
<td>Load the helpers.</td>
</tr>
<tr>
<th><a href="#setUp"><strong>setUp</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td></td>
</tr>
<tr>
<th><a href="#tearDown"><strong>tearDown</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td></td>
</tr>
<tr>
<th><a href="#mockSession"><strong>mockSession</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Injects the mock session driver into Services</td>
</tr>
<tr>
<th><a href="#mockEmail"><strong>mockEmail</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Injects the mock email driver so no emails really send</td>
</tr>
<tr>
<th><a href="#assertLogged"><strong>assertLogged</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Custom function to hook into CodeIgniter&#039;s Logging mechanism
to check if certain messages were logged during code execution.</td>
</tr>
<tr>
<th><a href="#assertEventTriggered"><strong>assertEventTriggered</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Hooks into CodeIgniter&#039;s Events system to check if a specific
event was triggered or not.</td>
</tr>
<tr>
<th><a href="#assertHeaderEmitted"><strong>assertHeaderEmitted</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Hooks into xdebug&#039;s headers capture, looking for a specific header
emitted</td>
</tr>
<tr>
<th><a href="#assertHeaderNotEmitted"><strong>assertHeaderNotEmitted</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Hooks into xdebug&#039;s headers capture, looking for a specific header
emitted</td>
</tr>
<tr>
<th><a href="#assertCloseEnough"><strong>assertCloseEnough</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Custom function to test that two values are &quot;close enough&quot;.</td>
</tr>
<tr>
<th><a href="#assertCloseEnoughString"><strong>assertCloseEnoughString</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Custom function to test that two values are &quot;close enough&quot;.</td>
</tr>
<tr>
<th><a href="#createApplication"><strong>createApplication</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Loads up an instance of CodeIgniter
and gets the environment setup.</td>
</tr>
<tr>
<th><a href="#getHeaderEmitted"><strong>getHeaderEmitted</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Return first matching emitted header.</td>
</tr>

</table>





### Properties


<hr>

#### $app

```php
protected $app;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

*No description.*


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>\CodeIgniter\CodeIgniter
</td>
</tr>
</table>


<hr>

#### $setUpMethods

```php
protected $setUpMethods = [
	'mockEmail',
	'mockSession',
];
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Methods to run during setUp.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>array
</td>
</tr>
</table>


<hr>

#### $tearDownMethods

```php
protected $tearDownMethods = [];
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Methods to run during tearDown.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>array
</td>
</tr>
</table>







### Methods


<hr>

#### setUpBeforeClass()

```php
public static function setUpBeforeClass() : void
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Load the helpers.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>










<details>
<summary><small>Source: 6 lines (86 - 91)</small></summary>

```php
public static function setUpBeforeClass(): void
{
	parent::setUpBeforeClass();

	helper(['url', 'test']);
}
```

</details>


<hr>

#### setUp()

```php
protected function setUp() : void
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

*No description.*


</details>



<table style="text-align:left">
</table>










<details>
<summary><small>Source: 14 lines (93 - 106)</small></summary>

```php
protected function setUp(): void
{
	parent::setUp();

	if (! $this->app)
	{
		$this->app = $this->createApplication();
	}

	foreach ($this->setUpMethods as $method)
	{
		$this->$method();
	}
}
```

</details>


<hr>

#### tearDown()

```php
protected function tearDown() : void
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

*No description.*


</details>



<table style="text-align:left">
</table>










<details>
<summary><small>Source: 9 lines (108 - 116)</small></summary>

```php
protected function tearDown(): void
{
	parent::tearDown();

	foreach ($this->tearDownMethods as $method)
	{
		$this->$method();
	}
}
```

</details>


<hr>

#### mockSession()

```php
protected function mockSession()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Injects the mock session driver into Services
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>










<details>
<summary><small>Source: 9 lines (125 - 133)</small></summary>

```php
protected function mockSession()
{
	$_SESSION = [];

	$config  = config('App');
	$session = new MockSession(new ArrayHandler($config, '0.0.0.0'), $config);

	Services::injectMock('session', $session);
}
```

</details>


<hr>

#### mockEmail()

```php
protected function mockEmail()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Injects the mock email driver so no emails really send
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>










<details>
<summary><small>Source: 4 lines (138 - 141)</small></summary>

```php
protected function mockEmail()
{
	Services::injectMock('email', new MockEmail(config('Email')));
}
```

</details>


<hr>

#### assertLogged()

```php
public function assertLogged(string $level, $expectedMessage = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Custom function to hook into CodeIgniter's Logging mechanism
to check if certain messages were logged during code execution.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$level</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$expectedMessage</code></td>
<td><em>null
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>bool
</td>
</tr>
</table>


<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\Exception
</td>
</tr>
</table>



<details>
<summary><small>Source: 7 lines (157 - 163)</small></summary>

```php
public function assertLogged(string $level, $expectedMessage = null)
{
	$result = TestLogger::didLog($level, $expectedMessage);

	$this->assertTrue($result);
	return $result;
}
```

</details>


<hr>

#### assertEventTriggered()

```php
public function assertEventTriggered(string $eventName) : bool
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Hooks into CodeIgniter's Events system to check if a specific
event was triggered or not.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$eventName</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>bool
</td>
</tr>
</table>


<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\Exception
</td>
</tr>
</table>



<details>
<summary><small>Source: 19 lines (174 - 192)</small></summary>

```php
public function assertEventTriggered(string $eventName): bool
{
	$found     = false;
	$eventName = strtolower($eventName);

	foreach (Events::getPerformanceLogs() as $log)
	{
		if ($log['event'] !== $eventName)
		{
			continue;
		}

		$found = true;
		break;
	}

	$this->assertTrue($found);
	return $found;
}
```

</details>


<hr>

#### assertHeaderEmitted()

```php
public function assertHeaderEmitted(string $header, bool $ignoreCase = false) : void
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Hooks into xdebug's headers capture, looking for a specific header
emitted
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$header</code></td>
<td><em>string
</em></td>
<td>false</td>
<td>The leading portion of the header we are looking for</td>
</tr>

<tr>
<td>2.</td>
<td><code>$ignoreCase</code></td>
<td><em>bool
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>





<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\Exception
</td>
</tr>
</table>



<details>
<summary><small>Source: 22 lines (203 - 224)</small></summary>

```php
public function assertHeaderEmitted(string $header, bool $ignoreCase = false): void
{
	$found = false;

	if (! function_exists('xdebug_get_headers'))
	{
		$this->markTestSkipped('XDebug not found.');
	}

	foreach (xdebug_get_headers() as $emitted)
	{
		$found = $ignoreCase ?
				(stripos($emitted, $header) === 0) :
				(strpos($emitted, $header) === 0);
		if ($found)
		{
			break;
		}
	}

	$this->assertTrue($found, "Didn't find header for {$header}");
}
```

</details>


<hr>

#### assertHeaderNotEmitted()

```php
public function assertHeaderNotEmitted(string $header, bool $ignoreCase = false) : void
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Hooks into xdebug's headers capture, looking for a specific header
emitted
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$header</code></td>
<td><em>string
</em></td>
<td>false</td>
<td>The leading portion of the header we don't want to find</td>
</tr>

<tr>
<td>2.</td>
<td><code>$ignoreCase</code></td>
<td><em>bool
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>





<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\Exception
</td>
</tr>
</table>



<details>
<summary><small>Source: 23 lines (235 - 257)</small></summary>

```php
public function assertHeaderNotEmitted(string $header, bool $ignoreCase = false): void
{
	$found = false;

	if (! function_exists('xdebug_get_headers'))
	{
		$this->markTestSkipped('XDebug not found.');
	}

	foreach (xdebug_get_headers() as $emitted)
	{
		$found = $ignoreCase ?
				(stripos($emitted, $header) === 0) :
				(strpos($emitted, $header) === 0);
		if ($found)
		{
			break;
		}
	}

	$success = ! $found;
	$this->assertTrue($success, "Found header for {$header}");
}
```

</details>


<hr>

#### assertCloseEnough()

```php
public function assertCloseEnough(int $expected, $actual, string $message = '', int $tolerance = 1)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Custom function to test that two values are "close enough".
</td></tr>
</table>

<table>
<tr><td>
This is intended for extended execution time testing,
where the result is close but not exactly equal to the
expected time, for reasons beyond our control.
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$expected</code></td>
<td><em>int
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$actual</code></td>
<td><em>mixed
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>3.</td>
<td><code>$message</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>4.</td>
<td><code>$tolerance</code></td>
<td><em>int
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>





<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\Exception
</td>
</tr>
</table>



<details>
<summary><small>Source: 6 lines (272 - 277)</small></summary>

```php
public function assertCloseEnough(int $expected, $actual, string $message = '', int $tolerance = 1)
{
	$difference = abs($expected - (int) floor($actual));

	$this->assertLessThanOrEqual($tolerance, $difference, $message);
}
```

</details>


<hr>

#### assertCloseEnoughString()

```php
public function assertCloseEnoughString($expected, $actual, string $message = '', int $tolerance = 1)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Custom function to test that two values are "close enough".
</td></tr>
</table>

<table>
<tr><td>
This is intended for extended execution time testing,
where the result is close but not exactly equal to the
expected time, for reasons beyond our control.
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$expected</code></td>
<td><em>mixed
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$actual</code></td>
<td><em>mixed
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>3.</td>
<td><code>$message</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>4.</td>
<td><code>$tolerance</code></td>
<td><em>int
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>bool
</td>
</tr>
</table>


<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\Exception
</td>
</tr>
</table>



<details>
<summary><small>Source: 22 lines (293 - 314)</small></summary>

```php
public function assertCloseEnoughString($expected, $actual, string $message = '', int $tolerance = 1)
{
	$expected = (string) $expected;
	$actual   = (string) $actual;
	if (strlen($expected) !== strlen($actual))
	{
		return false;
	}

	try
	{
		$expected   = (int) substr($expected, -2);
		$actual     = (int) substr($actual, -2);
		$difference = abs($expected - $actual);

		$this->assertLessThanOrEqual($tolerance, $difference, $message);
	}
	catch (\Exception $e)
	{
		return false;
	}
}
```

</details>


<hr>

#### createApplication()

```php
protected function createApplication()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Loads up an instance of CodeIgniter
and gets the environment setup.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>\CodeIgniter\CodeIgniter
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (326 - 329)</small></summary>

```php
protected function createApplication()
{
	return require realpath(__DIR__ . '/../') . '/bootstrap.php';
}
```

</details>


<hr>

#### getHeaderEmitted()

```php
protected function getHeaderEmitted(string $header, bool $ignoreCase = false) : ?string
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Return first matching emitted header.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$header</code></td>
<td><em>string
</em></td>
<td>false</td>
<td>Identifier of the header of interest</td>
</tr>

<tr>
<td>2.</td>
<td><code>$ignoreCase</code></td>
<td><em>bool
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>string<br>null
</td>
</tr>
</table>





<details>
<summary><small>Source: 22 lines (339 - 360)</small></summary>

```php
protected function getHeaderEmitted(string $header, bool $ignoreCase = false): ?string
{
	$found = false;

	if (! function_exists('xdebug_get_headers'))
	{
		$this->markTestSkipped('XDebug not found.');
	}

	foreach (xdebug_get_headers() as $emitted)
	{
		$found = $ignoreCase ?
				(stripos($emitted, $header) === 0) :
				(strpos($emitted, $header) === 0);
		if ($found)
		{
			return $emitted;
		}
	}

	return null;
}
```

</details>





 


 
  




<hr>

<table>
<tr>
<td style="width:100%"><em>framework/system/Test/CIUnitTestCase.php</em></td>
<td><a href="../../../../../../api/index.md">index</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/CIDatabaseTestCase.md">prev</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/ControllerResponse.md">next</a></td>
<td><a href="#">top</a></td></tr>
</table>




<div style="text-align:right;">

<small>_Generated at **2020-08-14 07:35:15**_ *([EnixApp](https://github.com/enix-app) - [ApiDoc](https://github.com/enix-app/apidoc))*</small>
</div>