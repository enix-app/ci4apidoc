


 



<table>
<tr>
<td style="width:100%"><em>framework/system/Test/CIDatabaseTestCase.php</em></td>
<td><a href="../../../../../../api/index.md">index</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Session/SessionInterface.md">prev</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/CIUnitTestCase.md">next</a></td>
</tr>
</table>







# CodeIgniter\Test 
<table style="text-align:left">
<tr><th>namespace</th><td>CodeIgniter\Test</td></tr>
</table>

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
CodeIgniter
</td></tr>
</table>

<table>
<tr><td>
An open source application development framework for PHP

This content is released under the MIT License (MIT)

Copyright (c) 2014-2019 British Columbia Institute of Technology
Copyright (c) 2019-2020 CodeIgniter Foundation

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
</td></tr>
</table>

</details>



<table style="text-align:left">
<tr style="vertical-align:top;">
<th>package</th>
<td>CodeIgniter
</td>
</tr>
<tr style="vertical-align:top;">
<th>author</th>
<td>CodeIgniter Dev Team
</td>
</tr>
<tr style="vertical-align:top;">
<th>copyright</th>
<td>2019-2020 CodeIgniter Foundation
</td>
</tr>
<tr style="vertical-align:top;">
<th>license</th>
<td><a href="https://opensource.org/licenses/MIT">https://opensource.org/licenses/MIT</a>	MIT License
</td>
</tr>
<tr style="vertical-align:top;">
<th>link</th>
<td><a href="https://codeigniter.com">https://codeigniter.com</a>

</td>
</tr>
<tr style="vertical-align:top;">
<th>filesource</th>
<td>framework/system/Test/CIDatabaseTestCase.php
</td>
</tr>
</table>

 

<details>
<summary style="margin-bottom:12px;"><strong>Members</strong></summary>
<table>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/CIDatabaseTestCase.md">CodeIgniter\Test\CIDatabaseTestCase</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/CIUnitTestCase.md">CodeIgniter\Test\CIUnitTestCase</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/ControllerResponse.md">CodeIgniter\Test\ControllerResponse</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/ControllerTester.md">CodeIgniter\Test\ControllerTester</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/DOMParser.md">CodeIgniter\Test\DOMParser</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Fabricator.md">CodeIgniter\Test\Fabricator</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/FeatureResponse.md">CodeIgniter\Test\FeatureResponse</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/FeatureTestCase.md">CodeIgniter\Test\FeatureTestCase</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/FeatureTestTrait.md">CodeIgniter\Test\FeatureTestTrait</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Filters/CITestStreamFilter.md">CodeIgniter\Test\Filters\CITestStreamFilter</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Interfaces/FabricatorModel.md">CodeIgniter\Test\Interfaces\FabricatorModel</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockAppConfig.md">CodeIgniter\Test\Mock\MockAppConfig</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockAutoload.md">CodeIgniter\Test\Mock\MockAutoload</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockBuilder.md">CodeIgniter\Test\Mock\MockBuilder</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCLIConfig.md">CodeIgniter\Test\Mock\MockCLIConfig</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCURLRequest.md">CodeIgniter\Test\Mock\MockCURLRequest</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCache.md">CodeIgniter\Test\Mock\MockCache</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCodeIgniter.md">CodeIgniter\Test\Mock\MockCodeIgniter</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockConnection.md">CodeIgniter\Test\Mock\MockConnection</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockEmail.md">CodeIgniter\Test\Mock\MockEmail</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockEvents.md">CodeIgniter\Test\Mock\MockEvents</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockFileLogger.md">CodeIgniter\Test\Mock\MockFileLogger</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockIncomingRequest.md">CodeIgniter\Test\Mock\MockIncomingRequest</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockLanguage.md">CodeIgniter\Test\Mock\MockLanguage</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockLogger.md">CodeIgniter\Test\Mock\MockLogger</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockQuery.md">CodeIgniter\Test\Mock\MockQuery</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResourceController.md">CodeIgniter\Test\Mock\MockResourceController</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResourcePresenter.md">CodeIgniter\Test\Mock\MockResourcePresenter</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResponse.md">CodeIgniter\Test\Mock\MockResponse</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResult.md">CodeIgniter\Test\Mock\MockResult</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockSecurity.md">CodeIgniter\Test\Mock\MockSecurity</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockServices.md">CodeIgniter\Test\Mock\MockServices</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockSession.md">CodeIgniter\Test\Mock\MockSession</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockTable.md">CodeIgniter\Test\Mock\MockTable</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/ReflectionHelper.md">CodeIgniter\Test\ReflectionHelper</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/TestLogger.md">CodeIgniter\Test\TestLogger</a></td></tr>
</table>
</details>



 
 ## Uses

<table style="text-align:left;">
<tr>
<td>
<a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/BaseConnection.md"><strong>CodeIgniter\Database\BaseConnection</strong></a>
</td>
<td>BaseConnection</td>
</tr>
<tr>
<td>
<a href="../../../../../../api/vendor/codeigniter4/framework/system/Database/MigrationRunner.md"><strong>CodeIgniter\Database\MigrationRunner</strong></a>
</td>
<td>MigrationRunner</td>
</tr>
<tr>
<td>
<a href="../../../../../../api/vendor/codeigniter4/framework/system/Exceptions/ConfigException.md"><strong>CodeIgniter\Exceptions\ConfigException</strong></a>
</td>
<td>ConfigException</td>
</tr>
<tr>
<td>
<strong>Config\Database</strong>
</td>
<td>Database</td>
</tr>
<tr>
<td>
<strong>Config\Migrations</strong>
</td>
<td>Migrations</td>
</tr>
<tr>
<td>
<strong>Config\Services</strong>
</td>
<td>Services</td>
</tr>
</table>



 
## CodeIgniter\Test\CIDatabaseTestCase

<table style="text-align:left">
<tr><th>Class</th><td>CIDatabaseTestCase</td></tr>
<tr><th>Fully Qualified Name</th><td>CodeIgniter\Test\CIDatabaseTestCase</td></tr>
<tr><th>Extends</th><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/CIUnitTestCase.md">CodeIgniter\Test\CIUnitTestCase</a></td></tr>
</table>


<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
CIDatabaseTestCase
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>



### Summary


<table style="text-align:left;">
<tr>
<th>Name</th>
<th>Element</th>
<th>Modifier</th>
<th>Description</th>
</tr>

<tr>
<th><a href="#refresh"><strong>refresh</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Should the db be refreshed before
each test?</td>
</tr>
<tr>
<th><a href="#seed"><strong>seed</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>The seed file(s) used for all tests within this test case.</td>
</tr>
<tr>
<th><a href="#basePath"><strong>basePath</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>The path to the seeds directory.</td>
</tr>
<tr>
<th><a href="#namespace"><strong>namespace</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>The namespace(s) to help us find the migration classes.</td>
</tr>
<tr>
<th><a href="#DBGroup"><strong>DBGroup</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>The name of the database group to connect to.</td>
</tr>
<tr>
<th><a href="#db"><strong>db</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Our database connection.</td>
</tr>
<tr>
<th><a href="#migrations"><strong>migrations</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Migration Runner instance.</td>
</tr>
<tr>
<th><a href="#seeder"><strong>seeder</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Seeder instance</td>
</tr>
<tr>
<th><a href="#insertCache"><strong>insertCache</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Stores information needed to remove any
rows inserted via $this-&gt;hasInDatabase();</td>
</tr>

<tr>
<th><a href="#loadDependencies"><strong>loadDependencies</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Load any database test dependencies.</td>
</tr>
<tr>
<th><a href="#setUp"><strong>setUp</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Ensures that the database is cleaned up to a known state
before each test runs.</td>
</tr>
<tr>
<th><a href="#tearDown"><strong>tearDown</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Takes care of any required cleanup after the test, like
removing any rows inserted via $this-&gt;hasInDatabase()</td>
</tr>
<tr>
<th><a href="#regressDatabase"><strong>regressDatabase</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Regress migrations as defined by the class</td>
</tr>
<tr>
<th><a href="#migrateDatabase"><strong>migrateDatabase</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Run migrations as defined by the class</td>
</tr>
<tr>
<th><a href="#seed"><strong>seed</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Seeds that database with a specific seeder.</td>
</tr>
<tr>
<th><a href="#dontSeeInDatabase"><strong>dontSeeInDatabase</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Asserts that records that match the conditions in $where do
not exist in the database.</td>
</tr>
<tr>
<th><a href="#seeInDatabase"><strong>seeInDatabase</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Asserts that records that match the conditions in $where DO
exist in the database.</td>
</tr>
<tr>
<th><a href="#grabFromDatabase"><strong>grabFromDatabase</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Fetches a single column from a database row with criteria
matching $where.</td>
</tr>
<tr>
<th><a href="#hasInDatabase"><strong>hasInDatabase</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Inserts a row into to the database. This row will be removed
after the test has run.</td>
</tr>
<tr>
<th><a href="#seeNumRecords"><strong>seeNumRecords</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Asserts that the number of rows in the database that match $where
is equal to $expected.</td>
</tr>

</table>





### Properties


<hr>

#### $refresh

```php
protected $refresh = true;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Should the db be refreshed before
each test?
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>bool
</td>
</tr>
</table>


<hr>

#### $seed

```php
protected $seed = '';
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
The seed file(s) used for all tests within this test case.
</td></tr>
</table>

<table>
<tr><td>
Should be fully-namespaced or relative to $basePath
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>string<br>array
</td>
</tr>
</table>


<hr>

#### $basePath

```php
protected $basePath = SUPPORTPATH . 'Database';
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
The path to the seeds directory.
</td></tr>
</table>

<table>
<tr><td>
Allows overriding the default application directories.
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>string
</td>
</tr>
</table>


<hr>

#### $namespace

```php
protected $namespace = 'Tests\Support';
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
The namespace(s) to help us find the migration classes.
</td></tr>
</table>

<table>
<tr><td>
Empty is equivalent to running `spark migrate -all`.
Note that running "all" runs migrations in date order,
but specifying namespaces runs them in namespace order (then date)
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>string<br>array<br>null
</td>
</tr>
</table>


<hr>

#### $DBGroup

```php
protected $DBGroup = 'tests';
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
The name of the database group to connect to.
</td></tr>
</table>

<table>
<tr><td>
If not present, will use the defaultGroup.
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>string
</td>
</tr>
</table>


<hr>

#### $db

```php
protected $db;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Our database connection.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>\BaseConnection
</td>
</tr>
</table>


<hr>

#### $migrations

```php
protected $migrations;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Migration Runner instance.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>\MigrationRunner<br>mixed
</td>
</tr>
</table>


<hr>

#### $seeder

```php
protected $seeder;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Seeder instance
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>\CodeIgniter\Database\Seeder
</td>
</tr>
</table>


<hr>

#### $insertCache

```php
protected $insertCache = [];
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Stores information needed to remove any
rows inserted via $this->hasInDatabase();
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>array
</td>
</tr>
</table>







### Methods


<hr>

#### loadDependencies()

```php
public function loadDependencies()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Load any database test dependencies.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>










<details>
<summary><small>Source: 24 lines (129 - 152)</small></summary>

```php
public function loadDependencies()
{
	if ($this->db === null)
	{
		$this->db = Database::connect($this->DBGroup);
		$this->db->initialize();
	}

	if ($this->migrations === null)
	{
		// Ensure that we can run migrations
		$config          = new Migrations();
		$config->enabled = true;

		$this->migrations = Services::migrations($config, $this->db);
		$this->migrations->setSilent(false);
	}

	if ($this->seeder === null)
	{
		$this->seeder = Database::seeder($this->DBGroup);
		$this->seeder->setSilent(true);
	}
}
```

</details>


<hr>

#### setUp()

```php
protected function setUp() : void
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Ensures that the database is cleaned up to a known state
before each test runs.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>







<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\ConfigException
</td>
</tr>
</table>



<details>
<summary><small>Source: 30 lines (162 - 191)</small></summary>

```php
protected function setUp(): void
{
	parent::setUp();

	$this->loadDependencies();

	if ($this->refresh === true)
	{
		$this->regressDatabase();

		// Reset counts on faked items
		Fabricator::resetCounts();
	}

	$this->migrateDatabase();

	if (! empty($this->seed))
	{
		if (! empty($this->basePath))
		{
			$this->seeder->setPath(rtrim($this->basePath, '/') . '/Seeds');
		}

		$seeds = is_array($this->seed) ? $this->seed : [$this->seed];
		foreach ($seeds as $seed)
		{
			$this->seed($seed);
		}
	}
}
```

</details>


<hr>

#### tearDown()

```php
protected function tearDown() : void
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Takes care of any required cleanup after the test, like
removing any rows inserted via $this->hasInDatabase()
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>










<details>
<summary><small>Source: 14 lines (199 - 212)</small></summary>

```php
protected function tearDown(): void
{
	parent::tearDown();

	if (! empty($this->insertCache))
	{
		foreach ($this->insertCache as $row)
		{
			$this->db->table($row[0])
					->where($row[1])
					->delete();
		}
	}
}
```

</details>


<hr>

#### regressDatabase()

```php
protected function regressDatabase()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Regress migrations as defined by the class
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>










<details>
<summary><small>Source: 21 lines (219 - 239)</small></summary>

```php
protected function regressDatabase()
{
	// If no namespace was specified then rollback all
	if (empty($this->namespace))
	{
		$this->migrations->setNamespace(null);
		$this->migrations->regress(0, 'tests');
	}

	// Regress each specified namespace
	else
	{
		$namespaces = is_array($this->namespace) ? $this->namespace : [$this->namespace];

		foreach ($namespaces as $namespace)
		{
			$this->migrations->setNamespace($namespace);
			$this->migrations->regress(0, 'tests');
		}
	}
}
```

</details>


<hr>

#### migrateDatabase()

```php
protected function migrateDatabase()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Run migrations as defined by the class
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>










<details>
<summary><small>Source: 20 lines (244 - 263)</small></summary>

```php
protected function migrateDatabase()
{
	// If no namespace was specified then migrate all
	if (empty($this->namespace))
	{
		$this->migrations->setNamespace(null);
		$this->migrations->latest('tests');
	}
	// Run migrations for each specified namespace
	else
	{
		$namespaces = is_array($this->namespace) ? $this->namespace : [$this->namespace];

		foreach ($namespaces as $namespace)
		{
			$this->migrations->setNamespace($namespace);
			$this->migrations->latest('tests');
		}
	}
}
```

</details>


<hr>

#### seed()

```php
public function seed(string $name)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Seeds that database with a specific seeder.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$name</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>








<details>
<summary><small>Source: 4 lines (270 - 273)</small></summary>

```php
public function seed(string $name)
{
	return $this->seeder->call($name);
}
```

</details>


<hr>

#### dontSeeInDatabase()

```php
public function dontSeeInDatabase(string $table, array $where)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Asserts that records that match the conditions in $where do
not exist in the database.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$table</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$where</code></td>
<td><em>array
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>bool
</td>
</tr>
</table>





<details>
<summary><small>Source: 8 lines (288 - 295)</small></summary>

```php
public function dontSeeInDatabase(string $table, array $where)
{
	$count = $this->db->table($table)
			->where($where)
			->countAllResults();

	$this->assertTrue($count === 0, 'Row was found in database');
}
```

</details>


<hr>

#### seeInDatabase()

```php
public function seeInDatabase(string $table, array $where)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Asserts that records that match the conditions in $where DO
exist in the database.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$table</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$where</code></td>
<td><em>array
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>bool
</td>
</tr>
</table>


<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\CodeIgniter\Database\Exceptions\DatabaseException
</td>
</tr>
</table>



<details>
<summary><small>Source: 8 lines (309 - 316)</small></summary>

```php
public function seeInDatabase(string $table, array $where)
{
	$count = $this->db->table($table)
			->where($where)
			->countAllResults();

	$this->assertTrue($count > 0, 'Row not found in database: ' . $this->db->showLastQuery());
}
```

</details>


<hr>

#### grabFromDatabase()

```php
public function grabFromDatabase(string $table, string $column, array $where)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Fetches a single column from a database row with criteria
matching $where.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$table</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$column</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>3.</td>
<td><code>$where</code></td>
<td><em>array
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>bool
</td>
</tr>
</table>


<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\CodeIgniter\Database\Exceptions\DatabaseException
</td>
</tr>
</table>



<details>
<summary><small>Source: 11 lines (331 - 341)</small></summary>

```php
public function grabFromDatabase(string $table, string $column, array $where)
{
	$query = $this->db->table($table)
			->select($column)
			->where($where)
			->get();

	$query = $query->getRow();

	return $query->$column ?? false;
}
```

</details>


<hr>

#### hasInDatabase()

```php
public function hasInDatabase(string $table, array $data)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Inserts a row into to the database. This row will be removed
after the test has run.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$table</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$data</code></td>
<td><em>array
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>bool
</td>
</tr>
</table>





<details>
<summary><small>Source: 10 lines (354 - 363)</small></summary>

```php
public function hasInDatabase(string $table, array $data)
{
	$this->insertCache[] = [
		$table,
		$data,
	];

	return $this->db->table($table)
				->insert($data);
}
```

</details>


<hr>

#### seeNumRecords()

```php
public function seeNumRecords(int $expected, string $table, array $where)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Asserts that the number of rows in the database that match $where
is equal to $expected.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$expected</code></td>
<td><em>int
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$table</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>3.</td>
<td><code>$where</code></td>
<td><em>array
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>bool
</td>
</tr>
</table>


<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\CodeIgniter\Database\Exceptions\DatabaseException
</td>
</tr>
</table>



<details>
<summary><small>Source: 8 lines (378 - 385)</small></summary>

```php
public function seeNumRecords(int $expected, string $table, array $where)
{
	$count = $this->db->table($table)
			->where($where)
			->countAllResults();

	$this->assertEquals($expected, $count, 'Wrong number of matching rows in database.');
}
```

</details>





 


 
  




<hr>

<table>
<tr>
<td style="width:100%"><em>framework/system/Test/CIDatabaseTestCase.php</em></td>
<td><a href="../../../../../../api/index.md">index</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Session/SessionInterface.md">prev</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/CIUnitTestCase.md">next</a></td>
<td><a href="#">top</a></td></tr>
</table>




<div style="text-align:right;">

<small>_Generated at **2020-08-14 07:35:15**_ *([EnixApp](https://github.com/enix-app) - [ApiDoc](https://github.com/enix-app/apidoc))*</small>
</div>