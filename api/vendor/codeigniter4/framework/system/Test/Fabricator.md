


 



<table>
<tr>
<td style="width:100%"><em>framework/system/Test/Fabricator.php</em></td>
<td><a href="../../../../../../api/index.md">index</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/DOMParser.md">prev</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/FeatureResponse.md">next</a></td>
</tr>
</table>







# CodeIgniter\Test 
<table style="text-align:left">
<tr><th>namespace</th><td>CodeIgniter\Test</td></tr>
</table>

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
CodeIgniter
</td></tr>
</table>

<table>
<tr><td>
An open source application development framework for PHP

This content is released under the MIT License (MIT)

Copyright (c) 2014-2019 British Columbia Institute of Technology
Copyright (c) 2019-2020 CodeIgniter Foundation

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
</td></tr>
</table>

</details>



<table style="text-align:left">
<tr style="vertical-align:top;">
<th>package</th>
<td>CodeIgniter
</td>
</tr>
<tr style="vertical-align:top;">
<th>author</th>
<td>CodeIgniter Dev Team
</td>
</tr>
<tr style="vertical-align:top;">
<th>copyright</th>
<td>2019-2020 CodeIgniter Foundation
</td>
</tr>
<tr style="vertical-align:top;">
<th>license</th>
<td><a href="https://opensource.org/licenses/MIT">https://opensource.org/licenses/MIT</a>	MIT License
</td>
</tr>
<tr style="vertical-align:top;">
<th>link</th>
<td><a href="https://codeigniter.com">https://codeigniter.com</a>

</td>
</tr>
<tr style="vertical-align:top;">
<th>filesource</th>
<td>framework/system/Test/Fabricator.php
</td>
</tr>
</table>

 

<details>
<summary style="margin-bottom:12px;"><strong>Members</strong></summary>
<table>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/CIDatabaseTestCase.md">CodeIgniter\Test\CIDatabaseTestCase</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/CIUnitTestCase.md">CodeIgniter\Test\CIUnitTestCase</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/ControllerResponse.md">CodeIgniter\Test\ControllerResponse</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/ControllerTester.md">CodeIgniter\Test\ControllerTester</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/DOMParser.md">CodeIgniter\Test\DOMParser</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Fabricator.md">CodeIgniter\Test\Fabricator</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/FeatureResponse.md">CodeIgniter\Test\FeatureResponse</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/FeatureTestCase.md">CodeIgniter\Test\FeatureTestCase</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/FeatureTestTrait.md">CodeIgniter\Test\FeatureTestTrait</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Filters/CITestStreamFilter.md">CodeIgniter\Test\Filters\CITestStreamFilter</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Interfaces/FabricatorModel.md">CodeIgniter\Test\Interfaces\FabricatorModel</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockAppConfig.md">CodeIgniter\Test\Mock\MockAppConfig</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockAutoload.md">CodeIgniter\Test\Mock\MockAutoload</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockBuilder.md">CodeIgniter\Test\Mock\MockBuilder</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCLIConfig.md">CodeIgniter\Test\Mock\MockCLIConfig</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCURLRequest.md">CodeIgniter\Test\Mock\MockCURLRequest</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCache.md">CodeIgniter\Test\Mock\MockCache</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockCodeIgniter.md">CodeIgniter\Test\Mock\MockCodeIgniter</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockConnection.md">CodeIgniter\Test\Mock\MockConnection</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockEmail.md">CodeIgniter\Test\Mock\MockEmail</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockEvents.md">CodeIgniter\Test\Mock\MockEvents</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockFileLogger.md">CodeIgniter\Test\Mock\MockFileLogger</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockIncomingRequest.md">CodeIgniter\Test\Mock\MockIncomingRequest</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockLanguage.md">CodeIgniter\Test\Mock\MockLanguage</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockLogger.md">CodeIgniter\Test\Mock\MockLogger</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockQuery.md">CodeIgniter\Test\Mock\MockQuery</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResourceController.md">CodeIgniter\Test\Mock\MockResourceController</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResourcePresenter.md">CodeIgniter\Test\Mock\MockResourcePresenter</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResponse.md">CodeIgniter\Test\Mock\MockResponse</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockResult.md">CodeIgniter\Test\Mock\MockResult</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockSecurity.md">CodeIgniter\Test\Mock\MockSecurity</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockServices.md">CodeIgniter\Test\Mock\MockServices</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockSession.md">CodeIgniter\Test\Mock\MockSession</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/Mock/MockTable.md">CodeIgniter\Test\Mock\MockTable</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/ReflectionHelper.md">CodeIgniter\Test\ReflectionHelper</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/TestLogger.md">CodeIgniter\Test\TestLogger</a></td></tr>
</table>
</details>



 
 ## Uses

<table style="text-align:left;">
<tr>
<td>
<a href="../../../../../../api/vendor/codeigniter4/framework/system/Model.md"><strong>CodeIgniter\Model</strong></a>
</td>
<td>Model</td>
</tr>
<tr>
<td>
<strong>Faker\Factory</strong>
</td>
<td>Factory</td>
</tr>
<tr>
<td>
<strong>Faker\Generator</strong>
</td>
<td>Generator</td>
</tr>
</table>



 
## CodeIgniter\Test\Fabricator

<table style="text-align:left">
<tr><th>Class</th><td>Fabricator</td></tr>
<tr><th>Fully Qualified Name</th><td>CodeIgniter\Test\Fabricator</td></tr>
</table>


<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Fabricator
</td></tr>
</table>

<table>
<tr><td>
Bridge class for using Faker to create example data based on
model specifications.
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>



### Summary


<table style="text-align:left;">
<tr>
<th>Name</th>
<th>Element</th>
<th>Modifier</th>
<th>Description</th>
</tr>

<tr>
<th><a href="#tableCounts"><strong>tableCounts</strong></a></th>
<td>prop</td>
<td>
protected<br>static

</td>
<td>Array of counts for fabricated items</td>
</tr>
<tr>
<th><a href="#faker"><strong>faker</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Locale-specific Faker instance</td>
</tr>
<tr>
<th><a href="#model"><strong>model</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Model instance (can be non-framework if it follows framework design)</td>
</tr>
<tr>
<th><a href="#locale"><strong>locale</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Locale used to initialize Faker</td>
</tr>
<tr>
<th><a href="#formatters"><strong>formatters</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Map of properties and their formatter to use</td>
</tr>
<tr>
<th><a href="#dateFields"><strong>dateFields</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Date fields present in the model</td>
</tr>
<tr>
<th><a href="#overrides"><strong>overrides</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Array of data to add or override faked versions</td>
</tr>
<tr>
<th><a href="#tempOverrides"><strong>tempOverrides</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Array of single-use data to override faked versions</td>
</tr>
<tr>
<th><a href="#defaultFormatter"><strong>defaultFormatter</strong></a></th>
<td>prop</td>
<td>
public

</td>
<td>Default formatter to use when nothing is detected</td>
</tr>

<tr>
<th><a href="#__construct"><strong>__construct</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Store the model instance and initialize Faker to the locale.</td>
</tr>
<tr>
<th><a href="#resetCounts"><strong>resetCounts</strong>()</a></th>
<td>method</td>
<td>
public<br>static

</td>
<td>Reset internal counts</td>
</tr>
<tr>
<th><a href="#getCount"><strong>getCount</strong>()</a></th>
<td>method</td>
<td>
public<br>static

</td>
<td>Get the count for a specific table</td>
</tr>
<tr>
<th><a href="#setCount"><strong>setCount</strong>()</a></th>
<td>method</td>
<td>
public<br>static

</td>
<td>Set the count for a specific table</td>
</tr>
<tr>
<th><a href="#upCount"><strong>upCount</strong>()</a></th>
<td>method</td>
<td>
public<br>static

</td>
<td>Increment the count for a table</td>
</tr>
<tr>
<th><a href="#downCount"><strong>downCount</strong>()</a></th>
<td>method</td>
<td>
public<br>static

</td>
<td>Decrement the count for a table</td>
</tr>
<tr>
<th><a href="#getModel"><strong>getModel</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Returns the model instance</td>
</tr>
<tr>
<th><a href="#getLocale"><strong>getLocale</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Returns the locale</td>
</tr>
<tr>
<th><a href="#getFaker"><strong>getFaker</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Returns the Faker generator</td>
</tr>
<tr>
<th><a href="#getOverrides"><strong>getOverrides</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Return and reset tempOverrides</td>
</tr>
<tr>
<th><a href="#setOverrides"><strong>setOverrides</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Set the overrides, once or persistent</td>
</tr>
<tr>
<th><a href="#getFormatters"><strong>getFormatters</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Returns the current formatters</td>
</tr>
<tr>
<th><a href="#setFormatters"><strong>setFormatters</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Set the formatters to use. Will attempt to autodetect if none are available.</td>
</tr>
<tr>
<th><a href="#detectFormatters"><strong>detectFormatters</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Try to identify the appropriate Faker formatter for each field.</td>
</tr>
<tr>
<th><a href="#guessFormatter"><strong>guessFormatter</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Guess at the correct formatter to match a field name.</td>
</tr>
<tr>
<th><a href="#make"><strong>make</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Generate new entities with faked data</td>
</tr>
<tr>
<th><a href="#makeArray"><strong>makeArray</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Generate an array of faked data</td>
</tr>
<tr>
<th><a href="#makeObject"><strong>makeObject</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Generate an object of faked data</td>
</tr>
<tr>
<th><a href="#create"><strong>create</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Generate new entities from the database</td>
</tr>
<tr>
<th><a href="#createMock"><strong>createMock</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Generate new database entities without actually inserting them</td>
</tr>

</table>





### Properties


<hr>

#### $tableCounts

```php
protected static $tableCounts = [];
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Array of counts for fabricated items
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>array
</td>
</tr>
</table>


<hr>

#### $faker

```php
protected $faker;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Locale-specific Faker instance
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>\Faker\Generator
</td>
</tr>
</table>


<hr>

#### $model

```php
protected $model;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Model instance (can be non-framework if it follows framework design)
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>\CodeIgniter\Model<br>object
</td>
</tr>
</table>


<hr>

#### $locale

```php
protected $locale;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Locale used to initialize Faker
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>string
</td>
</tr>
</table>


<hr>

#### $formatters

```php
protected $formatters;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Map of properties and their formatter to use
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>array
</td>
</tr>
</table>


<hr>

#### $dateFields

```php
protected $dateFields = [];
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Date fields present in the model
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>array
</td>
</tr>
</table>


<hr>

#### $overrides

```php
protected $overrides = [];
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Array of data to add or override faked versions
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>array
</td>
</tr>
</table>


<hr>

#### $tempOverrides

```php
protected $tempOverrides;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Array of single-use data to override faked versions
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>array<br>null
</td>
</tr>
</table>


<hr>

#### $defaultFormatter

```php
public $defaultFormatter = 'word';
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Default formatter to use when nothing is detected
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>string
</td>
</tr>
</table>







### Methods


<hr>

#### __construct()

```php
public function __construct($model, array $formatters = null, string $locale = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Store the model instance and initialize Faker to the locale.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$model</code></td>
<td><em>string<br>object
</em></td>
<td>false</td>
<td>Instance or classname of the model to use</td>
</tr>

<tr>
<td>2.</td>
<td><code>$formatters</code></td>
<td><em>array<br>null
</em></td>
<td>false</td>
<td>Array of property => formatter</td>
</tr>

<tr>
<td>3.</td>
<td><code>$locale</code></td>
<td><em>string<br>null
</em></td>
<td>false</td>
<td>Locale for Faker provider</td>
</tr>


</tbody>
</table>





<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\InvalidArgumentException
</td>
</tr>
</table>



<details>
<summary><small>Source: 39 lines (127 - 165)</small></summary>

```php
public function __construct($model, array $formatters = null, string $locale = null)
{
	if (is_string($model))
	{
		// Create a new model instance
		$model = model($model, false);
	}

	if (! is_object($model))
	{
		throw new \InvalidArgumentException(lang('Fabricator.invalidModel'));
	}

	$this->model = $model;

	// If no locale was specified then use the App default
	if (is_null($locale))
	{
		$locale = config('App')->defaultLocale;
	}

	// There is no easy way to retrieve the locale from Faker so we will store it
	$this->locale = $locale;

	// Create the locale-specific Generator
	$this->faker = Factory::create($this->locale);

	// Determine eligible date fields
	foreach (['createdField', 'updatedField', 'deletedField'] as $field)
	{
		if (! empty($this->model->$field))
		{
			$this->dateFields[] = $this->model->$field;
		}
	}

	// Set the formatters
	$this->setFormatters($formatters);
}
```

</details>


<hr>

#### resetCounts()

```php
public static function resetCounts()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Reset internal counts
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>










<details>
<summary><small>Source: 4 lines (172 - 175)</small></summary>

```php
public static function resetCounts()
{
	self::$tableCounts = [];
}
```

</details>


<hr>

#### getCount()

```php
public static function getCount(string $table) : int
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Get the count for a specific table
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$table</code></td>
<td><em>string
</em></td>
<td>false</td>
<td>Name of the target table</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>int
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (184 - 187)</small></summary>

```php
public static function getCount(string $table): int
{
	return empty(self::$tableCounts[$table]) ? 0 : self::$tableCounts[$table];
}
```

</details>


<hr>

#### setCount()

```php
public static function setCount(string $table, int $count) : int
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Set the count for a specific table
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$table</code></td>
<td><em>string
</em></td>
<td>false</td>
<td>Name of the target table</td>
</tr>

<tr>
<td>2.</td>
<td><code>$count</code></td>
<td><em>int
</em></td>
<td>false</td>
<td>Count value</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>int
</td>
</tr>
</table>





<details>
<summary><small>Source: 5 lines (197 - 201)</small></summary>

```php
public static function setCount(string $table, int $count): int
{
	self::$tableCounts[$table] = $count;
	return $count;
}
```

</details>


<hr>

#### upCount()

```php
public static function upCount(string $table) : int
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Increment the count for a table
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$table</code></td>
<td><em>string
</em></td>
<td>false</td>
<td>Name of the target table</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>int
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (210 - 213)</small></summary>

```php
public static function upCount(string $table): int
{
	return self::setCount($table, self::getCount($table) + 1);
}
```

</details>


<hr>

#### downCount()

```php
public static function downCount(string $table) : int
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Decrement the count for a table
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$table</code></td>
<td><em>string
</em></td>
<td>false</td>
<td>Name of the target table</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>int
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (222 - 225)</small></summary>

```php
public static function downCount(string $table): int
{
	return self::setCount($table, self::getCount($table) - 1);
}
```

</details>


<hr>

#### getModel()

```php
public function getModel()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Returns the model instance
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>object
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (234 - 237)</small></summary>

```php
public function getModel()
{
	return $this->model;
}
```

</details>


<hr>

#### getLocale()

```php
public function getLocale() : string
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Returns the locale
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>string
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (244 - 247)</small></summary>

```php
public function getLocale(): string
{
	return $this->locale;
}
```

</details>


<hr>

#### getFaker()

```php
public function getFaker() : Generator
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Returns the Faker generator
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>\Faker\Generator
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (254 - 257)</small></summary>

```php
public function getFaker(): Generator
{
	return $this->faker;
}
```

</details>


<hr>

#### getOverrides()

```php
public function getOverrides() : array
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Return and reset tempOverrides
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>array
</td>
</tr>
</table>





<details>
<summary><small>Source: 8 lines (266 - 273)</small></summary>

```php
public function getOverrides(): array
{
	$overrides = $this->tempOverrides ?? $this->overrides;

	$this->tempOverrides = $this->overrides;

	return $overrides;
}
```

</details>


<hr>

#### setOverrides()

```php
public function setOverrides(array $overrides = array(), $persist = true) : self
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Set the overrides, once or persistent
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$overrides</code></td>
<td><em>array
</em></td>
<td>false</td>
<td>Array of [field => value]</td>
</tr>

<tr>
<td>2.</td>
<td><code>$persist</code></td>
<td><em>bool
</em></td>
<td>false</td>
<td>Whether these overrides should persist through the next operation</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>$this
</td>
</tr>
</table>





<details>
<summary><small>Source: 11 lines (283 - 293)</small></summary>

```php
public function setOverrides(array $overrides = [], $persist = true): self
{
	if ($persist)
	{
		$this->overrides = $overrides;
	}

	$this->tempOverrides = $overrides;

	return $this;
}
```

</details>


<hr>

#### getFormatters()

```php
public function getFormatters() : ?array
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Returns the current formatters
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>array<br>null
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (302 - 305)</small></summary>

```php
public function getFormatters(): ?array
{
	return $this->formatters;
}
```

</details>


<hr>

#### setFormatters()

```php
public function setFormatters(array $formatters = null) : self
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Set the formatters to use. Will attempt to autodetect if none are available.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$formatters</code></td>
<td><em>array<br>null
</em></td>
<td>false</td>
<td>Array of [field => formatter], or null to detect</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>$this
</td>
</tr>
</table>





<details>
<summary><small>Source: 17 lines (314 - 330)</small></summary>

```php
public function setFormatters(array $formatters = null): self
{
	if (! is_null($formatters))
	{
		$this->formatters = $formatters;
	}
	elseif (method_exists($this->model, 'fake'))
	{
		$this->formatters = null;
	}
	else
	{
		$formatters = $this->detectFormatters();
	}

	return $this;
}
```

</details>


<hr>

#### detectFormatters()

```php
protected function detectFormatters() : self
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Try to identify the appropriate Faker formatter for each field.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>$this
</td>
</tr>
</table>





<details>
<summary><small>Source: 14 lines (337 - 350)</small></summary>

```php
protected function detectFormatters(): self
{
	$this->formatters = [];

	if (! empty($this->model->allowedFields))
	{
		foreach ($this->model->allowedFields as $field)
		{
			$this->formatters[$field] = $this->guessFormatter($field);
		}
	}

	return $this;
}
```

</details>


<hr>

#### guessFormatter()

```php
protected function guessFormatter($field) : string
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Guess at the correct formatter to match a field name.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$field</code></td>
<td><em>
</em></td>
<td>false</td>
<td> of the field</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>string
</td>
</tr>
</table>





<details>
<summary><small>Source: 53 lines (359 - 411)</small></summary>

```php
protected function guessFormatter($field): string
{
	// First check for a Faker formatter of the same name - covers things like "email"
	try
	{
		$this->faker->getFormatter($field);
		return $field;
	}
	catch (\InvalidArgumentException $e)
	{
		// No match, keep going
	}

	// Next look for known model fields
	if (in_array($field, $this->dateFields))
	{
		switch ($this->model->dateFormat)
		{
			case 'datetime':
				return 'date';
			break;

			case 'date':
				return 'date';
			break;

			case 'int':
				return 'unixTime';
			break;
		}
	}
	elseif ($field === $this->model->primaryKey)
	{
		return 'numberBetween';
	}

	// Check some common partials
	foreach (['email', 'name', 'title', 'text', 'date', 'url'] as $term)
	{
		if (stripos($field, $term) !== false)
		{
			return $term;
		}
	}

	if (stripos($field, 'phone') !== false)
	{
		return 'phoneNumber';
	}

	// Nothing left, use the default
	return $this->defaultFormatter;
}
```

</details>


<hr>

#### make()

```php
public function make(int $count = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Generate new entities with faked data
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$count</code></td>
<td><em>int<br>null
</em></td>
<td>false</td>
<td>Optional number to create a collection</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>array<br>object
</td>
</tr>
</table>





<details>
<summary><small>Source: 21 lines (422 - 442)</small></summary>

```php
public function make(int $count = null)
{
	// If a singleton was requested then go straight to it
	if (is_null($count))
	{
		return $this->model->returnType === 'array'
			? $this->makeArray()
			: $this->makeObject();
	}

	$return = [];

	for ($i = 0; $i < $count; $i++)
	{
		$return[] = $this->model->returnType === 'array'
			? $this->makeArray()
			: $this->makeObject();
	}

	return $return;
}
```

</details>


<hr>

#### makeArray()

```php
public function makeArray()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Generate an array of faked data
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>array
</td>
</tr>
</table>


<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\RuntimeException
</td>
</tr>
</table>



<details>
<summary><small>Source: 38 lines (451 - 488)</small></summary>

```php
public function makeArray()
{
	if (! is_null($this->formatters))
	{
		$result = [];

		foreach ($this->formatters as $field => $formatter)
		{
			$result[$field] = $this->faker->{$formatter};
		}
	}

	// If no formatters were defined then look for a model fake() method
	elseif (method_exists($this->model, 'fake'))
	{
		$result = $this->model->fake($this->faker);

		// This should cover entities
		if (method_exists($result, 'toArray'))
		{
			$result = $result->toArray();
		}
		// Try to cast it
		else
		{
			$result = (array) $result;
		}
	}

	// Nothing left to do but give up
	else
	{
		throw new \RuntimeException(lang('Fabricator.missingFormatters'));
	}

	// Replace overridden fields
	return array_merge($result, $this->getOverrides());
}
```

</details>


<hr>

#### makeObject()

```php
public function makeObject(string $className = null) : object
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Generate an object of faked data
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$className</code></td>
<td><em>string<br>null
</em></td>
<td>false</td>
<td>Class name of the object to create; null to use model default</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>object
</td>
</tr>
</table>


<table>
<tr>
<th style="vertical-align:top;">throw</th>
<td>\RuntimeException
</td>
</tr>
</table>



<details>
<summary><small>Source: 50 lines (499 - 548)</small></summary>

```php
public function makeObject(string $className = null): object
{
	if (is_null($className))
	{
		if ($this->model->returnType === 'object' || $this->model->returnType === 'array')
		{
			$className = 'stdClass';
		}
		else
		{
			$className = $this->model->returnType;
		}
	}

	// If using the model's fake() method then check it for the correct return type
	if (is_null($this->formatters) && method_exists($this->model, 'fake'))
	{
		$result = $this->model->fake($this->faker);

		if ($result instanceof $className)
		{
			// Set overrides manually
			foreach ($this->getOverrides() as $key => $value)
			{
				$result->{$key} = $value;
			}

			return $result;
		}
	}

	// Get the array values and apply them to the object
	$array  = $this->makeArray();
	$object = new $className();

	// Check for the entity method
	if (method_exists($object, 'fill'))
	{
		$object->fill($array);
	}
	else
	{
		foreach ($array as $key => $value)
		{
			$object->{$key} = $value;
		}
	}

	return $object;
}
```

</details>


<hr>

#### create()

```php
public function create(int $count = null, bool $mock = false)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Generate new entities from the database
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$count</code></td>
<td><em>int<br>null
</em></td>
<td>false</td>
<td>Optional number to create a collection</td>
</tr>

<tr>
<td>2.</td>
<td><code>$override</code></td>
<td><em>array
</em></td>
<td>false</td>
<td>Array of data to add/override</td>
</tr>

<tr>
<td>3.</td>
<td><code>$mock</code></td>
<td><em>bool
</em></td>
<td>false</td>
<td>Whether to execute or mock the insertion</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>array<br>object
</td>
</tr>
</table>





<details>
<summary><small>Source: 28 lines (561 - 588)</small></summary>

```php
public function create(int $count = null, bool $mock = false)
{
	// Intercept mock requests
	if ($mock)
	{
		return $this->createMock($count);
	}

	$ids = [];

	// Iterate over new entities and insert each one, storing insert IDs
	foreach ($this->make($count ?? 1) as $result)
	{
		if ($id = $this->model->insert($result, true))
		{
			$ids[] = $id;
			self::upCount($this->model->table);
		}
	}

	// If the model defines a "withDeleted" method for handling soft deletes then use it
	if (method_exists($this->model, 'withDeleted'))
	{
		$this->model->withDeleted();
	}

	return $this->model->find(is_null($count) ? reset($ids) : $ids);
}
```

</details>


<hr>

#### createMock()

```php
protected function createMock(int $count = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Generate new database entities without actually inserting them
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$count</code></td>
<td><em>int<br>null
</em></td>
<td>false</td>
<td>Optional number to create a collection</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>array<br>object
</td>
</tr>
</table>





<details>
<summary><small>Source: 51 lines (597 - 647)</small></summary>

```php
protected function createMock(int $count = null)
{
	switch ($this->model->dateFormat)
	{
		case 'datetime':
			$datetime = date('Y-m-d H:i:s');
		case 'date':
			$datetime = date('Y-m-d');
		default:
			$datetime = time();
	}

	// Determine which fields we will need
	$fields = [];

	if (! empty($this->model->useTimestamps))
	{
		$fields[$this->model->createdField] = $datetime;
		$fields[$this->model->updatedField] = $datetime;
	}

	if (! empty($this->model->useSoftDeletes))
	{
		$fields[$this->model->deletedField] = null;
	}

	// Iterate over new entities and add the necessary fields
	$return = [];
	foreach ($this->make($count ?? 1) as $i => $result)
	{
		// Set the ID
		$fields[$this->model->primaryKey] = $i;

		// Merge fields
		if (is_array($result))
		{
			$result = array_merge($result, $fields);
		}
		else
		{
			foreach ($fields as $key => $value)
			{
				$result->{$key} = $value;
			}
		}

		$return[] = $result;
	}

	return is_null($count) ? reset($return) : $return;
}
```

</details>





 


 
  




<hr>

<table>
<tr>
<td style="width:100%"><em>framework/system/Test/Fabricator.php</em></td>
<td><a href="../../../../../../api/index.md">index</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/DOMParser.md">prev</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/Test/FeatureResponse.md">next</a></td>
<td><a href="#">top</a></td></tr>
</table>




<div style="text-align:right;">

<small>_Generated at **2020-08-14 07:35:15**_ *([EnixApp](https://github.com/enix-app) - [ApiDoc](https://github.com/enix-app/apidoc))*</small>
</div>