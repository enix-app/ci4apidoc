


 



<table>
<tr>
<td style="width:100%"><em>framework/system/HTTP/IncomingRequest.php</em></td>
<td><a href="../../../../../../api/index.md">index</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Header.md">prev</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Message.md">next</a></td>
</tr>
</table>







# CodeIgniter\HTTP 
<table style="text-align:left">
<tr><th>namespace</th><td>CodeIgniter\HTTP</td></tr>
</table>

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
CodeIgniter
</td></tr>
</table>

<table>
<tr><td>
An open source application development framework for PHP

This content is released under the MIT License (MIT)

Copyright (c) 2014-2019 British Columbia Institute of Technology
Copyright (c) 2019-2020 CodeIgniter Foundation

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
</td></tr>
</table>

</details>



<table style="text-align:left">
<tr style="vertical-align:top;">
<th>package</th>
<td>CodeIgniter
</td>
</tr>
<tr style="vertical-align:top;">
<th>author</th>
<td>CodeIgniter Dev Team
</td>
</tr>
<tr style="vertical-align:top;">
<th>copyright</th>
<td>2019-2020 CodeIgniter Foundation
</td>
</tr>
<tr style="vertical-align:top;">
<th>license</th>
<td><a href="https://opensource.org/licenses/MIT">https://opensource.org/licenses/MIT</a>	MIT License
</td>
</tr>
<tr style="vertical-align:top;">
<th>link</th>
<td><a href="https://codeigniter.com">https://codeigniter.com</a>

</td>
</tr>
<tr style="vertical-align:top;">
<th>filesource</th>
<td>framework/system/HTTP/IncomingRequest.php
</td>
</tr>
</table>

 

<details>
<summary style="margin-bottom:12px;"><strong>Members</strong></summary>
<table>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/CLIRequest.md">CodeIgniter\HTTP\CLIRequest</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/CURLRequest.md">CodeIgniter\HTTP\CURLRequest</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/ContentSecurityPolicy.md">CodeIgniter\HTTP\ContentSecurityPolicy</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/DownloadResponse.md">CodeIgniter\HTTP\DownloadResponse</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Exceptions/HTTPException.md">CodeIgniter\HTTP\Exceptions\HTTPException</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Files/FileCollection.md">CodeIgniter\HTTP\Files\FileCollection</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Files/UploadedFile.md">CodeIgniter\HTTP\Files\UploadedFile</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Files/UploadedFileInterface.md">CodeIgniter\HTTP\Files\UploadedFileInterface</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Header.md">CodeIgniter\HTTP\Header</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/IncomingRequest.md">CodeIgniter\HTTP\IncomingRequest</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Message.md">CodeIgniter\HTTP\Message</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Negotiate.md">CodeIgniter\HTTP\Negotiate</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/RedirectResponse.md">CodeIgniter\HTTP\RedirectResponse</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Request.md">CodeIgniter\HTTP\Request</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/RequestInterface.md">CodeIgniter\HTTP\RequestInterface</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Response.md">CodeIgniter\HTTP\Response</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/ResponseInterface.md">CodeIgniter\HTTP\ResponseInterface</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/URI.md">CodeIgniter\HTTP\URI</a></td></tr>
<tr><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/UserAgent.md">CodeIgniter\HTTP\UserAgent</a></td></tr>
</table>
</details>



 
 ## Uses

<table style="text-align:left;">
<tr>
<td>
<a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Exceptions/HTTPException.md"><strong>CodeIgniter\HTTP\Exceptions\HTTPException</strong></a>
</td>
<td>HTTPException</td>
</tr>
<tr>
<td>
<a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Files/FileCollection.md"><strong>CodeIgniter\HTTP\Files\FileCollection</strong></a>
</td>
<td>FileCollection</td>
</tr>
<tr>
<td>
<a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Files/UploadedFile.md"><strong>CodeIgniter\HTTP\Files\UploadedFile</strong></a>
</td>
<td>UploadedFile</td>
</tr>
<tr>
<td>
<strong>Config\Services</strong>
</td>
<td>Services</td>
</tr>
</table>



 
## CodeIgniter\HTTP\IncomingRequest

<table style="text-align:left">
<tr><th>Class</th><td>IncomingRequest</td></tr>
<tr><th>Fully Qualified Name</th><td>CodeIgniter\HTTP\IncomingRequest</td></tr>
<tr><th>Extends</th><td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Request.md">CodeIgniter\HTTP\Request</a></td></tr>
</table>


<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Class IncomingRequest
</td></tr>
</table>

<table>
<tr><td>
Represents an incoming, getServer-side HTTP request.

Per the HTTP specification, this interface includes properties for
each of the following:

- Protocol version
- HTTP method
- URI
- Headers
- Message body

Additionally, it encapsulates all data as it has arrived to the
application from the CGI and/or PHP environment, including:

- The values represented in $_SERVER.
- Any cookies provided (generally via $_COOKIE)
- Query string arguments (generally via $_GET, or as parsed via parse_str())
- Upload files, if any (as represented by $_FILES)
- Deserialized body binds (generally from $_POST)
</td></tr>
</table>

</details>



<table style="text-align:left">
<tr style="vertical-align:top;">
<th>package</th>
<td>CodeIgniter\HTTP
</td>
</tr>
</table>



### Summary


<table style="text-align:left;">
<tr>
<th>Name</th>
<th>Element</th>
<th>Modifier</th>
<th>Description</th>
</tr>

<tr>
<th><a href="#enableCSRF"><strong>enableCSRF</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Enable CSRF flag</td>
</tr>
<tr>
<th><a href="#uri"><strong>uri</strong></a></th>
<td>prop</td>
<td>
public

</td>
<td>A \CodeIgniter\HTTP\URI instance.</td>
</tr>
<tr>
<th><a href="#files"><strong>files</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>File collection</td>
</tr>
<tr>
<th><a href="#negotiator"><strong>negotiator</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Negotiator</td>
</tr>
<tr>
<th><a href="#defaultLocale"><strong>defaultLocale</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>The default Locale this request
should operate under.</td>
</tr>
<tr>
<th><a href="#locale"><strong>locale</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>The current locale of the application.</td>
</tr>
<tr>
<th><a href="#validLocales"><strong>validLocales</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Stores the valid locale codes.</td>
</tr>
<tr>
<th><a href="#config"><strong>config</strong></a></th>
<td>prop</td>
<td>
public

</td>
<td>Configuration settings.</td>
</tr>
<tr>
<th><a href="#oldInput"><strong>oldInput</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>Holds the old data from a redirect.</td>
</tr>
<tr>
<th><a href="#userAgent"><strong>userAgent</strong></a></th>
<td>prop</td>
<td>
protected

</td>
<td>The user agent this request is from.</td>
</tr>

<tr>
<th><a href="#__construct"><strong>__construct</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Constructor</td>
</tr>
<tr>
<th><a href="#detectLocale"><strong>detectLocale</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Handles setting up the locale, perhaps auto-detecting through
content negotiation.</td>
</tr>
<tr>
<th><a href="#getDefaultLocale"><strong>getDefaultLocale</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Returns the default locale as set in Config\App.php</td>
</tr>
<tr>
<th><a href="#getLocale"><strong>getLocale</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Gets the current locale, with a fallback to the default
locale if none is set.</td>
</tr>
<tr>
<th><a href="#setLocale"><strong>setLocale</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Sets the locale string for this request.</td>
</tr>
<tr>
<th><a href="#isCLI"><strong>isCLI</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Determines if this request was made from the command line (CLI).</td>
</tr>
<tr>
<th><a href="#isAJAX"><strong>isAJAX</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Test to see if a request contains the HTTP_X_REQUESTED_WITH header.</td>
</tr>
<tr>
<th><a href="#isSecure"><strong>isSecure</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Attempts to detect if the current connection is secure through
a few different methods.</td>
</tr>
<tr>
<th><a href="#getVar"><strong>getVar</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Fetch an item from the $_REQUEST object. This is the simplest way
to grab data from the request object and can be used in lieu of the
other get* methods in most cases.</td>
</tr>
<tr>
<th><a href="#getJSON"><strong>getJSON</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>A convenience method that grabs the raw input stream and decodes
the JSON into an array.</td>
</tr>
<tr>
<th><a href="#getRawInput"><strong>getRawInput</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>A convenience method that grabs the raw input stream(send method in PUT, PATCH, DELETE) and decodes
the String into an array.</td>
</tr>
<tr>
<th><a href="#getGet"><strong>getGet</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Fetch an item from GET data.</td>
</tr>
<tr>
<th><a href="#getPost"><strong>getPost</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Fetch an item from POST.</td>
</tr>
<tr>
<th><a href="#getPostGet"><strong>getPostGet</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Fetch an item from POST data with fallback to GET.</td>
</tr>
<tr>
<th><a href="#getGetPost"><strong>getGetPost</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Fetch an item from GET data with fallback to POST.</td>
</tr>
<tr>
<th><a href="#getCookie"><strong>getCookie</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Fetch an item from the COOKIE array.</td>
</tr>
<tr>
<th><a href="#getUserAgent"><strong>getUserAgent</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Fetch the user agent string</td>
</tr>
<tr>
<th><a href="#getOldInput"><strong>getOldInput</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Attempts to get old Input data that has been flashed to the session
with redirect_with_input(). It first checks for the data in the old
POST data, then the old GET data and finally check for dot arrays</td>
</tr>
<tr>
<th><a href="#getFiles"><strong>getFiles</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Returns an array of all files that have been uploaded with this
request. Each file is represented by an UploadedFile instance.</td>
</tr>
<tr>
<th><a href="#getFileMultiple"><strong>getFileMultiple</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Verify if a file exist, by the name of the input field used to upload it, in the collection
of uploaded files and if is have been uploaded with multiple option.</td>
</tr>
<tr>
<th><a href="#getFile"><strong>getFile</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Retrieves a single file by the name of the input field used
to upload it.</td>
</tr>
<tr>
<th><a href="#detectURI"><strong>detectURI</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Sets up our URI object based on the information we have. This is
either provided by the user in the baseURL Config setting, or
determined from the environment as needed.</td>
</tr>
<tr>
<th><a href="#detectPath"><strong>detectPath</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Based on the URIProtocol Config setting, will attempt to
detect the path portion of the current URI.</td>
</tr>
<tr>
<th><a href="#negotiate"><strong>negotiate</strong>()</a></th>
<td>method</td>
<td>
public

</td>
<td>Provides a convenient way to work with the Negotiate class
for content negotiation.</td>
</tr>
<tr>
<th><a href="#parseRequestURI"><strong>parseRequestURI</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Will parse the REQUEST_URI and automatically detect the URI from it,
fixing the query string if necessary.</td>
</tr>
<tr>
<th><a href="#parseQueryString"><strong>parseQueryString</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Parse QUERY_STRING</td>
</tr>
<tr>
<th><a href="#removeRelativeDirectory"><strong>removeRelativeDirectory</strong>()</a></th>
<td>method</td>
<td>
protected

</td>
<td>Remove relative directory (../) and multi slashes (///)</td>
</tr>

</table>





### Properties


<hr>

#### $enableCSRF

```php
protected $enableCSRF = false;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Enable CSRF flag
</td></tr>
</table>

<table>
<tr><td>
Enables a CSRF cookie token to be set.
Set automatically based on Config setting.
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>bool
</td>
</tr>
</table>


<hr>

#### $uri

```php
public $uri;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
A \CodeIgniter\HTTP\URI instance.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>\URI
</td>
</tr>
</table>


<hr>

#### $files

```php
protected $files;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
File collection
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>\Files\FileCollection
</td>
</tr>
</table>


<hr>

#### $negotiator

```php
protected $negotiator;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Negotiator
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>\CodeIgniter\HTTP\Negotiate
</td>
</tr>
</table>


<hr>

#### $defaultLocale

```php
protected $defaultLocale;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
The default Locale this request
should operate under.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>string
</td>
</tr>
</table>


<hr>

#### $locale

```php
protected $locale;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
The current locale of the application.
</td></tr>
</table>

<table>
<tr><td>
Default value is set in Config\App.php
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>string
</td>
</tr>
</table>


<hr>

#### $validLocales

```php
protected $validLocales = [];
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Stores the valid locale codes.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>array
</td>
</tr>
</table>


<hr>

#### $config

```php
public $config;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Configuration settings.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>\Config\App
</td>
</tr>
</table>


<hr>

#### $oldInput

```php
protected $oldInput = [];
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Holds the old data from a redirect.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>array
</td>
</tr>
</table>


<hr>

#### $userAgent

```php
protected $userAgent;
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
The user agent this request is from.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>




<table>
<tr>
<th style="vertical-align:top;">var</th>
<td>\CodeIgniter\HTTP\UserAgent
</td>
</tr>
</table>







### Methods


<hr>

#### __construct()

```php
public function __construct($config, URI $uri = null, $body = 'php://input', UserAgent $userAgent)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Constructor
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$config</code></td>
<td><em>object
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$uri</code></td>
<td><em>\CodeIgniter\HTTP\URI
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>3.</td>
<td><code>$body</code></td>
<td><em>string<br>null
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>4.</td>
<td><code>$userAgent</code></td>
<td><em>\CodeIgniter\HTTP\UserAgent
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>








<details>
<summary><small>Source: 29 lines (161 - 189)</small></summary>

```php
public function __construct($config, URI $uri = null, $body = 'php://input', UserAgent $userAgent)
{
	// Get our body from php://input
	if ($body === 'php://input')
	{
		$body = file_get_contents('php://input');
	}

	$this->body      = ! empty($body) ? $body : null;
	$this->config    = $config;
	$this->userAgent = $userAgent;

	parent::__construct($config);

	$this->populateHeaders();

	// Get our current URI.
	// NOTE: This WILL NOT match the actual URL in the browser since for
	// everything this cares about (and the router, etc) is the portion
	// AFTER the script name. So, if hosted in a sub-folder this will
	// appear different than actual URL. If you need that, use current_url().
	$this->uri = $uri;

	$this->detectURI($config->uriProtocol, $config->baseURL);

	$this->validLocales = $config->supportedLocales;

	$this->detectLocale($config);
}
```

</details>


<hr>

#### detectLocale()

```php
public function detectLocale($config)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Handles setting up the locale, perhaps auto-detecting through
content negotiation.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$config</code></td>
<td><em>
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>








<details>
<summary><small>Source: 11 lines (199 - 209)</small></summary>

```php
public function detectLocale($config)
{
	$this->locale = $this->defaultLocale = $config->defaultLocale;

	if (! $config->negotiateLocale)
	{
		return;
	}

	$this->setLocale($this->negotiate('language', $config->supportedLocales));
}
```

</details>


<hr>

#### getDefaultLocale()

```php
public function getDefaultLocale() : string
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Returns the default locale as set in Config\App.php
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>string
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (218 - 221)</small></summary>

```php
public function getDefaultLocale(): string
{
	return $this->defaultLocale;
}
```

</details>


<hr>

#### getLocale()

```php
public function getLocale() : string
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Gets the current locale, with a fallback to the default
locale if none is set.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>string
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (231 - 234)</small></summary>

```php
public function getLocale(): string
{
	return $this->locale ?? $this->defaultLocale;
}
```

</details>


<hr>

#### setLocale()

```php
public function setLocale(string $locale)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Sets the locale string for this request.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$locale</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>\IncomingRequest
</td>
</tr>
</table>





<details>
<summary><small>Source: 30 lines (245 - 274)</small></summary>

```php
public function setLocale(string $locale)
{
	// If it's not a valid locale, set it
	// to the default locale for the site.
	if (! in_array($locale, $this->validLocales))
	{
		$locale = $this->defaultLocale;
	}

	$this->locale = $locale;

	// If the intl extension is loaded, make sure
	// that we set the locale for it... if not, though,
	// don't worry about it.
	// this should not block code coverage thru unit testing
	// @codeCoverageIgnoreStart
	try
	{
		if (class_exists('\Locale', false))
		{
			\Locale::setDefault($locale);
		}
	}
	catch (\Exception $e)
	{
	}
	// @codeCoverageIgnoreEnd

	return $this;
}
```

</details>


<hr>

#### isCLI()

```php
public function isCLI() : bool
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Determines if this request was made from the command line (CLI).
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>bool
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (283 - 286)</small></summary>

```php
public function isCLI(): bool
{
	return is_cli();
}
```

</details>


<hr>

#### isAJAX()

```php
public function isAJAX() : bool
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Test to see if a request contains the HTTP_X_REQUESTED_WITH header.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>bool
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (295 - 298)</small></summary>

```php
public function isAJAX(): bool
{
	return $this->hasHeader('X-Requested-With') && strtolower($this->getHeader('X-Requested-With')->getValue()) === 'xmlhttprequest';
}
```

</details>


<hr>

#### isSecure()

```php
public function isSecure() : bool
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Attempts to detect if the current connection is secure through
a few different methods.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>bool
</td>
</tr>
</table>





<details>
<summary><small>Source: 17 lines (308 - 324)</small></summary>

```php
public function isSecure(): bool
{
	if (! empty($_SERVER['HTTPS']) && strtolower($_SERVER['HTTPS']) !== 'off')
	{
		return true;
	}
	elseif ($this->hasHeader('X-Forwarded-Proto') && $this->getHeader('X-Forwarded-Proto')->getValue() === 'https')
	{
		return true;
	}
	elseif ($this->hasHeader('Front-End-Https') && ! empty($this->getHeader('Front-End-Https')->getValue()) && strtolower($this->getHeader('Front-End-Https')->getValue()) !== 'off')
	{
		return true;
	}

	return false;
}
```

</details>


<hr>

#### getVar()

```php
public function getVar($index = null, $filter = null, $flags = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Fetch an item from the $_REQUEST object. This is the simplest way
to grab data from the request object and can be used in lieu of the
other get* methods in most cases.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$index</code></td>
<td><em>string<br>array<br>null
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$filter</code></td>
<td><em>int<br>null
</em></td>
<td>false</td>
<td>Filter constant</td>
</tr>

<tr>
<td>3.</td>
<td><code>$flags</code></td>
<td><em>mixed
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>mixed
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (339 - 342)</small></summary>

```php
public function getVar($index = null, $filter = null, $flags = null)
{
	return $this->fetchGlobal('request', $index, $filter, $flags);
}
```

</details>


<hr>

#### getJSON()

```php
public function getJSON(bool $assoc = false, int $depth = 512, int $options = 0)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
A convenience method that grabs the raw input stream and decodes
the JSON into an array.
</td></tr>
</table>

<table>
<tr><td>
If $assoc == true, then all objects in the response will be converted
to associative arrays.
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$assoc</code></td>
<td><em>bool
</em></td>
<td>false</td>
<td>Whether to return objects as associative arrays</td>
</tr>

<tr>
<td>2.</td>
<td><code>$depth</code></td>
<td><em>int
</em></td>
<td>false</td>
<td>How many levels deep to decode</td>
</tr>

<tr>
<td>3.</td>
<td><code>$options</code></td>
<td><em>int
</em></td>
<td>false</td>
<td>Bitmask of options</td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>mixed
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (361 - 364)</small></summary>

```php
public function getJSON(bool $assoc = false, int $depth = 512, int $options = 0)
{
	return json_decode($this->body, $assoc, $depth, $options);
}
```

</details>


<hr>

#### getRawInput()

```php
public function getRawInput()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
A convenience method that grabs the raw input stream(send method in PUT, PATCH, DELETE) and decodes
the String into an array.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>mixed
</td>
</tr>
</table>





<details>
<summary><small>Source: 6 lines (374 - 379)</small></summary>

```php
public function getRawInput()
{
	parse_str($this->body, $output);

	return $output;
}
```

</details>


<hr>

#### getGet()

```php
public function getGet($index = null, $filter = null, $flags = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Fetch an item from GET data.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$index</code></td>
<td><em>string<br>array<br>null
</em></td>
<td>false</td>
<td>Index for item to fetch from $_GET.</td>
</tr>

<tr>
<td>2.</td>
<td><code>$filter</code></td>
<td><em>int<br>null
</em></td>
<td>false</td>
<td>A filter name to apply.</td>
</tr>

<tr>
<td>3.</td>
<td><code>$flags</code></td>
<td><em>mixed<br>null
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>mixed
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (392 - 395)</small></summary>

```php
public function getGet($index = null, $filter = null, $flags = null)
{
	return $this->fetchGlobal('get', $index, $filter, $flags);
}
```

</details>


<hr>

#### getPost()

```php
public function getPost($index = null, $filter = null, $flags = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Fetch an item from POST.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$index</code></td>
<td><em>string<br>array<br>null
</em></td>
<td>false</td>
<td>Index for item to fetch from $_POST.</td>
</tr>

<tr>
<td>2.</td>
<td><code>$filter</code></td>
<td><em>int<br>null
</em></td>
<td>false</td>
<td>A filter name to apply</td>
</tr>

<tr>
<td>3.</td>
<td><code>$flags</code></td>
<td><em>mixed
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>mixed
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (408 - 411)</small></summary>

```php
public function getPost($index = null, $filter = null, $flags = null)
{
	return $this->fetchGlobal('post', $index, $filter, $flags);
}
```

</details>


<hr>

#### getPostGet()

```php
public function getPostGet($index = null, $filter = null, $flags = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Fetch an item from POST data with fallback to GET.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$index</code></td>
<td><em>string<br>array<br>null
</em></td>
<td>false</td>
<td>Index for item to fetch from $_POST or $_GET</td>
</tr>

<tr>
<td>2.</td>
<td><code>$filter</code></td>
<td><em>int<br>null
</em></td>
<td>false</td>
<td>A filter name to apply</td>
</tr>

<tr>
<td>3.</td>
<td><code>$flags</code></td>
<td><em>mixed
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>mixed
</td>
</tr>
</table>





<details>
<summary><small>Source: 7 lines (424 - 430)</small></summary>

```php
public function getPostGet($index = null, $filter = null, $flags = null)
{
	// Use $_POST directly here, since filter_has_var only
	// checks the initial POST data, not anything that might
	// have been added since.
	return isset($_POST[$index]) ? $this->getPost($index, $filter, $flags) : (isset($_GET[$index]) ? $this->getGet($index, $filter, $flags) : $this->getPost($index, $filter, $flags));
}
```

</details>


<hr>

#### getGetPost()

```php
public function getGetPost($index = null, $filter = null, $flags = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Fetch an item from GET data with fallback to POST.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$index</code></td>
<td><em>string<br>array<br>null
</em></td>
<td>false</td>
<td>Index for item to be fetched from $_GET or $_POST</td>
</tr>

<tr>
<td>2.</td>
<td><code>$filter</code></td>
<td><em>int<br>null
</em></td>
<td>false</td>
<td>A filter name to apply</td>
</tr>

<tr>
<td>3.</td>
<td><code>$flags</code></td>
<td><em>mixed
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>mixed
</td>
</tr>
</table>





<details>
<summary><small>Source: 7 lines (443 - 449)</small></summary>

```php
public function getGetPost($index = null, $filter = null, $flags = null)
{
	// Use $_GET directly here, since filter_has_var only
	// checks the initial GET data, not anything that might
	// have been added since.
	return isset($_GET[$index]) ? $this->getGet($index, $filter, $flags) : (isset($_POST[$index]) ? $this->getPost($index, $filter, $flags) : $this->getGet($index, $filter, $flags));
}
```

</details>


<hr>

#### getCookie()

```php
public function getCookie($index = null, $filter = null, $flags = null)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Fetch an item from the COOKIE array.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$index</code></td>
<td><em>string<br>array<br>null
</em></td>
<td>false</td>
<td>Index for item to be fetched from $_COOKIE</td>
</tr>

<tr>
<td>2.</td>
<td><code>$filter</code></td>
<td><em>int<br>null
</em></td>
<td>false</td>
<td>A filter name to be applied</td>
</tr>

<tr>
<td>3.</td>
<td><code>$flags</code></td>
<td><em>mixed
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>mixed
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (462 - 465)</small></summary>

```php
public function getCookie($index = null, $filter = null, $flags = null)
{
	return $this->fetchGlobal('cookie', $index, $filter, $flags);
}
```

</details>


<hr>

#### getUserAgent()

```php
public function getUserAgent()
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Fetch the user agent string
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>\CodeIgniter\HTTP\UserAgent
</td>
</tr>
</table>





<details>
<summary><small>Source: 4 lines (474 - 477)</small></summary>

```php
public function getUserAgent()
{
	return $this->userAgent;
}
```

</details>


<hr>

#### getOldInput()

```php
public function getOldInput(string $key)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Attempts to get old Input data that has been flashed to the session
with redirect_with_input(). It first checks for the data in the old
POST data, then the old GET data and finally check for dot arrays
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$key</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>mixed
</td>
</tr>
</table>





<details>
<summary><small>Source: 46 lines (490 - 535)</small></summary>

```php
public function getOldInput(string $key)
{
	// If the session hasn't been started, or no
	// data was previously saved, we're done.
	if (empty($_SESSION['_ci_old_input']))
	{
		return;
	}

	// Check for the value in the POST array first.
	if (isset($_SESSION['_ci_old_input']['post'][$key]))
	{
		return $_SESSION['_ci_old_input']['post'][$key];
	}

	// Next check in the GET array.
	if (isset($_SESSION['_ci_old_input']['get'][$key]))
	{
		return $_SESSION['_ci_old_input']['get'][$key];
	}

	helper('array');

	// Check for an array value in POST.
	if (isset($_SESSION['_ci_old_input']['post']))
	{
		$value = dot_array_search($key, $_SESSION['_ci_old_input']['post']);
		if (! is_null($value))
		{
			return $value;
		}
	}

	// Check for an array value in GET.
	if (isset($_SESSION['_ci_old_input']['get']))
	{
		$value = dot_array_search($key, $_SESSION['_ci_old_input']['get']);
		if (! is_null($value))
		{
			return $value;
		}
	}

	//      // return null if requested session key not found
	//      return null;
}
```

</details>


<hr>

#### getFiles()

```php
public function getFiles() : array
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Returns an array of all files that have been uploaded with this
request. Each file is represented by an UploadedFile instance.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>array
</td>
</tr>
</table>





<details>
<summary><small>Source: 9 lines (543 - 551)</small></summary>

```php
public function getFiles(): array
{
	if (is_null($this->files))
	{
		$this->files = new FileCollection();
	}

	return $this->files->all(); // return all files
}
```

</details>


<hr>

#### getFileMultiple()

```php
public function getFileMultiple(string $fileID)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Verify if a file exist, by the name of the input field used to upload it, in the collection
of uploaded files and if is have been uploaded with multiple option.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$fileID</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>array<br>null
</td>
</tr>
</table>





<details>
<summary><small>Source: 9 lines (563 - 571)</small></summary>

```php
public function getFileMultiple(string $fileID)
{
	if (is_null($this->files))
	{
		$this->files = new FileCollection();
	}

	return $this->files->getFileMultiple($fileID);
}
```

</details>


<hr>

#### getFile()

```php
public function getFile(string $fileID)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Retrieves a single file by the name of the input field used
to upload it.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$fileID</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>\UploadedFile<br>null
</td>
</tr>
</table>





<details>
<summary><small>Source: 9 lines (583 - 591)</small></summary>

```php
public function getFile(string $fileID)
{
	if (is_null($this->files))
	{
		$this->files = new FileCollection();
	}

	return $this->files->getFile($fileID);
}
```

</details>


<hr>

#### detectURI()

```php
protected function detectURI(string $protocol, string $baseURL)
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Sets up our URI object based on the information we have. This is
either provided by the user in the baseURL Config setting, or
determined from the environment as needed.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$protocol</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$baseURL</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>








<details>
<summary><small>Source: 29 lines (603 - 631)</small></summary>

```php
protected function detectURI(string $protocol, string $baseURL)
{
	$this->uri->setPath($this->detectPath($protocol));

	// It's possible the user forgot a trailing slash on their
	// baseURL, so let's help them out.
	$baseURL = ! empty($baseURL) ? rtrim($baseURL, '/ ') . '/' : $baseURL;

	// Based on our baseURL provided by the developer
	// set our current domain name, scheme
	if (! empty($baseURL))
	{
		$this->uri->setScheme(parse_url($baseURL, PHP_URL_SCHEME));
		$this->uri->setHost(parse_url($baseURL, PHP_URL_HOST));
		$this->uri->setPort(parse_url($baseURL, PHP_URL_PORT));

		// Ensure we have any query vars
		$this->uri->setQuery($_SERVER['QUERY_STRING'] ?? '');
	}
	else
	{
		// @codeCoverageIgnoreStart
		if (! is_cli())
		{
			die('You have an empty or invalid base URL. The baseURL value must be set in Config\App.php, or through the .env file.');
		}
		// @codeCoverageIgnoreEnd
	}
}
```

</details>


<hr>

#### detectPath()

```php
public function detectPath(string $protocol = '') : string
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Based on the URIProtocol Config setting, will attempt to
detect the path portion of the current URI.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$protocol</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>string
</td>
</tr>
</table>





<details>
<summary><small>Source: 23 lines (643 - 665)</small></summary>

```php
public function detectPath(string $protocol = ''): string
{
	if (empty($protocol))
	{
		$protocol = 'REQUEST_URI';
	}

	switch ($protocol)
	{
		case 'REQUEST_URI':
			$path = $this->parseRequestURI();
			break;
		case 'QUERY_STRING':
			$path = $this->parseQueryString();
			break;
		case 'PATH_INFO':
		default:
			$path = $this->fetchGlobal('server', $protocol) ?? $this->parseRequestURI();
			break;
	}

	return $path;
}
```

</details>


<hr>

#### negotiate()

```php
public function negotiate(string $type, array $supported, bool $strictMatch = false) : string
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Provides a convenient way to work with the Negotiate class
for content negotiation.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$type</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>2.</td>
<td><code>$supported</code></td>
<td><em>array
</em></td>
<td>false</td>
<td></td>
</tr>

<tr>
<td>3.</td>
<td><code>$strictMatch</code></td>
<td><em>bool
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>string
</td>
</tr>
</table>





<details>
<summary><small>Source: 21 lines (679 - 699)</small></summary>

```php
public function negotiate(string $type, array $supported, bool $strictMatch = false): string
{
	if (is_null($this->negotiator))
	{
		$this->negotiator = Services::negotiator($this, true);
	}

	switch (strtolower($type))
	{
		case 'media':
			return $this->negotiator->media($supported, $strictMatch);
		case 'charset':
			return $this->negotiator->charset($supported);
		case 'encoding':
			return $this->negotiator->encoding($supported);
		case 'language':
			return $this->negotiator->language($supported);
	}

	throw HTTPException::forInvalidNegotiationType($type);
}
```

</details>


<hr>

#### parseRequestURI()

```php
protected function parseRequestURI() : string
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Will parse the REQUEST_URI and automatically detect the URI from it,
fixing the query string if necessary.
</td></tr>
</table>


</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>string
</td>
</tr>
</table>





<details>
<summary><small>Source: 55 lines (709 - 763)</small></summary>

```php
protected function parseRequestURI(): string
{
	if (! isset($_SERVER['REQUEST_URI'], $_SERVER['SCRIPT_NAME']))
	{
		return '';
	}

	// parse_url() returns false if no host is present, but the path or query string
	// contains a colon followed by a number. So we attach a dummy host since
	// REQUEST_URI does not include the host. This allows us to parse out the query string and path.
	$parts = parse_url('http://dummy' . $_SERVER['REQUEST_URI']);
	$query = $parts['query'] ?? '';
	$uri   = $parts['path'] ?? '';

	if (isset($_SERVER['SCRIPT_NAME'][0]) && pathinfo($_SERVER['SCRIPT_NAME'], PATHINFO_EXTENSION) === 'php')
	{
		// strip the script name from the beginning of the URI
		if (strpos($uri, $_SERVER['SCRIPT_NAME']) === 0)
		{
			$uri = (string) substr($uri, strlen($_SERVER['SCRIPT_NAME']));
		}
		// if the script is nested, strip the parent folder & script from the URI
		elseif (strpos($uri, $_SERVER['SCRIPT_NAME']) > 0)
		{
			$uri = (string) substr($uri, strpos($uri, $_SERVER['SCRIPT_NAME']) + strlen($_SERVER['SCRIPT_NAME']));
		}
		// or if index.php is implied
		elseif (strpos($uri, dirname($_SERVER['SCRIPT_NAME'])) === 0)
		{
			$uri = (string) substr($uri, strlen(dirname($_SERVER['SCRIPT_NAME'])));
		}
	}

	// This section ensures that even on servers that require the URI to contain the query string (Nginx) a correct
	// URI is found, and also fixes the QUERY_STRING getServer var and $_GET array.
	if (trim($uri, '/') === '' && strncmp($query, '/', 1) === 0)
	{
		$query                   = explode('?', $query, 2);
		$uri                     = $query[0];
		$_SERVER['QUERY_STRING'] = $query[1] ?? '';
	}
	else
	{
		$_SERVER['QUERY_STRING'] = $query;
	}

	parse_str($_SERVER['QUERY_STRING'], $_GET);

	if ($uri === '/' || $uri === '')
	{
		return '/';
	}

	return $this->removeRelativeDirectory($uri);
}
```

</details>


<hr>

#### parseQueryString()

```php
protected function parseQueryString() : string
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Parse QUERY_STRING
</td></tr>
</table>

<table>
<tr><td>
Will parse QUERY_STRING and automatically detect the URI from it.
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>





<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>string
</td>
</tr>
</table>





<details>
<summary><small>Source: 19 lines (774 - 792)</small></summary>

```php
protected function parseQueryString(): string
{
	$uri = $_SERVER['QUERY_STRING'] ?? @getenv('QUERY_STRING');

	if (trim($uri, '/') === '')
	{
		return '';
	}
	elseif (strncmp($uri, '/', 1) === 0)
	{
		$uri                     = explode('?', $uri, 2);
		$_SERVER['QUERY_STRING'] = $uri[1] ?? '';
		$uri                     = $uri[0];
	}

	parse_str($_SERVER['QUERY_STRING'], $_GET);

	return $this->removeRelativeDirectory($uri);
}
```

</details>


<hr>

#### removeRelativeDirectory()

```php
protected function removeRelativeDirectory(string $uri) : string
```

<details>
<summary style="margin-bottom:12px;"><strong>Description</strong></summary>

<table>
<tr><td>
Remove relative directory (../) and multi slashes (///)
</td></tr>
</table>

<table>
<tr><td>
Do some final cleaning of the URI and return it, currently only used in static::_parse_request_uri()
</td></tr>
</table>

</details>



<table style="text-align:left">
</table>


**Params**

<table>
<thead>
<tr>
<th>#</th>
<th>Variable</th>
<th>Type</th>
<th>Variadic</th>
<th>Description</th>
</tr>
</thead>
<tbody>

<tr>
<td>1.</td>
<td><code>$uri</code></td>
<td><em>string
</em></td>
<td>false</td>
<td></td>
</tr>


</tbody>
</table>



<table>
<tr>
<th style="vertical-align:top;">return</th>
<td>string
</td>
</tr>
</table>





<details>
<summary><small>Source: 15 lines (805 - 819)</small></summary>

```php
protected function removeRelativeDirectory(string $uri): string
{
	$uris = [];
	$tok  = strtok($uri, '/');
	while ($tok !== false)
	{
		if (( ! empty($tok) || $tok === '0') && $tok !== '..')
		{
			$uris[] = $tok;
		}
		$tok = strtok('/');
	}

	return implode('/', $uris);
}
```

</details>





 


 
  




<hr>

<table>
<tr>
<td style="width:100%"><em>framework/system/HTTP/IncomingRequest.php</em></td>
<td><a href="../../../../../../api/index.md">index</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Header.md">prev</a></td>
<td><a href="../../../../../../api/vendor/codeigniter4/framework/system/HTTP/Message.md">next</a></td>
<td><a href="#">top</a></td></tr>
</table>




<div style="text-align:right;">

<small>_Generated at **2020-08-15 12:03:15**_ *([EnixApp](https://github.com/enix-app) - [ApiDoc](https://github.com/enix-app/apidoc))*</small>
</div>